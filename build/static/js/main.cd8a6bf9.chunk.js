(this["webpackJsonphzfe-music"]=this["webpackJsonphzfe-music"]||[]).push([[0],{215:function(e,t,a){e.exports=a(404)},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},309:function(e,t){},311:function(e,t){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},395:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n,r,c,i,l,s,u,o,m,p,f,d,b,h,y,g,v,E,j,O,w,k,x,P,L=a(0),N=a.n(L),M=a(32),I=a.n(M),C=a(100),U=a(36),S=a(7),T=a.n(S),z=a(26),D=a(39),A=(a(220),a(48)),R=function(){var e=Object(z.a)(T.a.mark((function e(t){var a,n=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(n.length>1&&void 0!==n[1])||n[1],t){e.next=3;break}return e.abrupt("return","");case 3:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var n=t.target;e(a?n.result?new Blob([n.result]):null:n.result)},r.onerror=n,a?r.readAsArrayBuffer(t):r.readAsText(t)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){for(var t,a=0,n=e.length,r="";a<n;)t=e.subarray(a,Math.min(a+32768,n)),r+=String.fromCharCode.apply(null,t),a+=32768;return btoa(r)},K=function(e){var t=Math.floor(e/60)||0,a=~~(e-60*t)||0;return(t<10?"0":"")+t+":"+(a<10?"0":"")+a},F=function(e){var t,a=(null===(t=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(e))||void 0===t?void 0:t.map((function(e){return e?Number(e):0})))||[];return 60*a[1]+a[2]+(a[4]?a[4]/(2===(a[4]+"").length?100:1e3):0)},q=function(e){var t=e.split(","),a="";if(t.length){var n=t[0].match(/:(.*?);/);(null===n||void 0===n?void 0:n.length)&&(a=n[1])}for(var r=atob(t[1]),c=r.length,i=new Uint8Array(c);c--;)i[c]=r.charCodeAt(c);return new Blob([i],{type:a})},B=(a(221),function(e){var t=Object(L.useState)([]),a=Object(D.a)(t,2),n=a[0],r=a[1],c=Object(L.useState)(-1),i=Object(D.a)(c,2),l=i[0],s=i[1],u=Object(L.useRef)(null),o=Object(L.useState)(!0),m=Object(D.a)(o,2),p=m[0],f=m[1],d=Object(L.useState)(2.5*document.body.offsetHeight/100),b=Object(D.a)(d,2),h=b[0],y=b[1];Object(L.useEffect)((function(){r(function(e){var t=e;if(t){for(var a=(t=t.replace(/([^\]^\n])\[/g,(function(e,t){return t+"\n["}))).split("\n"),n=[],r=a.length,c=0;c<r;c++){var i=a[c].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),l=a[c].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(i)for(var s=i.length,u=0;u<s;u++){var o=F(i[u]);n.push({time:o,text:l})}}return(n=n.filter((function(e){return e.text}))).sort((function(e,t){return e.time-t.time})),n}return[]}(e.lrc))}),[e.lrc]),Object(L.useEffect)((function(){s(function(e,t){if(e.length<=0)return-1;for(var a=0;a<e.length&&!(e[a].time>t);)a++;return a-1}(n,e.currentTime)),n.length&&n[l]&&e.setCurrentLrc(n[l].text)}),[l,n,e]),Object(L.useEffect)((function(){if(u&&p&&e.isPlaying){var t=u.current,a=-80;document.querySelectorAll(".lrc-list p").forEach((function(e,t){t<l&&(a+=e.offsetHeight+h)})),t&&t.scrollTo({top:a,behavior:"smooth"})}}),[p,h,l,e.isPlaying]);var g=function(e){return l===e?"choose-lrc":""},v=function(){y(2.5*document.body.offsetHeight/100)};return Object(L.useEffect)((function(){return window.addEventListener("resize",v),v(),function(){window.removeEventListener("resize",v)}}),[]),N.a.createElement("section",{className:"music-lrc",ref:u,onMouseEnter:function(){f(!1)},onMouseLeave:function(){if(e.isPlaying){var t=u.current,a=-80;document.querySelectorAll(".lrc-list p").forEach((function(e,t){t<l&&(a+=e.offsetHeight+h)})),t&&t.scrollTo({top:a,behavior:"auto"}),f(!0)}else f(!0)}},N.a.createElement("section",{className:"lrc-list"},n.map((function(t,a){return N.a.createElement("p",{key:"".concat(t.time).concat(t.text),style:{color:l===a?e.color:""},className:g(a),dangerouslySetInnerHTML:{__html:t.text}})}))))}),_=(a(222),a(223),a(409)),J=function(e){var t=Object(L.useState)(0),a=Object(D.a)(t,2),n=a[0],r=a[1],c=Object(L.useState)(!1),i=Object(D.a)(c,2),l=i[0],s=i[1];Object(L.useEffect)((function(){l||r(e.range)}),[l,e.range]);return N.a.createElement("section",{className:"progress"},N.a.createElement(_.a,{defaultValue:0,value:n,onChange:function(t){s(!0),e.setChange(!0),r(t),e.handleChanging(t)},onAfterChange:function(t){e.setChange(!1),s(!1)},tooltipVisible:!1}))},V=a(412),Z=a(413),$=a(414),G=a(415),Q=a(138),W=a(164),X=a(35),Y=a(97),ee=a(134),te=a(28),ae=(a(167),a(15)),ne=a(200),re=a(40),ce=a.n(re),ie=function(){var e=Object(z.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-lrc-list",e.next=3,ce.a.getItem("music-lrc-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return a=e.t0,a.every((function(e){return e.fileName!==t.fileName}))&&a.push(t),e.abrupt("return",ce.a.setItem("music-lrc-list",a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(z.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-lrc-list",e.next=3,ce.a.getItem("music-lrc-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(z.a)(T.a.mark((function e(t,a){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-list",e.next=3,ce.a.getItem("music-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:if(n=e.t0,!n.every((function(e){return e.fileName!==t.fileName}))){e.next=14;break}return r="".concat(t.fileName,"-").concat(100*Math.random(),"-").concat(Date.now()),t.id=r,e.next=13,ce.a.setItem(r,a);case 13:n.push(t);case 14:return e.abrupt("return",ce.a.setItem("music-list",n));case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(z.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(z.a)(T.a.mark((function e(a,n){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"music-list",e.next=4,ce.a.getItem("music-list");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return r=(r=e.t0).filter((function(e){return e.id!==t})),e.next=11,ce.a.setItem("music-list",r);case 11:return e.next=13,ce.a.removeItem(t);case 13:a(!0),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),n(e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(z.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-list",e.next=3,ce.a.getItem("music-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(z.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(z.a)(T.a.mark((function e(a,n){var r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.getItem("music-list");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(r=e.t0,c=r.filter((function(e){return e.id===t}))[0]){e.next=11;break}n("\u83b7\u53d6\u6b4c\u66f2\u4fe1\u606f\u5931\u8d25"),e.next=21;break;case 11:return e.next=13,ce.a.getItem(t);case 13:if(c.music=e.sent,!c.lrcKey){e.next=19;break}return e.next=17,le();case 17:e.sent.forEach((function(e){e.fileName===c.lrcKey&&(c.lrc=e.content)}));case 19:c.picture.length>0&&(c.pictureUrl=URL.createObjectURL(q(c.picture[0]))),a(c);case 21:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(z.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(z.a)(T.a.mark((function e(a,n){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"music-lrc-list",e.next=4,ce.a.getItem("music-lrc-list");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return r=(r=e.t0).filter((function(e){return e.fileName!==t})),e.next=11,ce.a.setItem("music-lrc-list",r);case 11:a(!0),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),n(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=a(213),de=new(n=function(){function e(){var t=this;Object(Y.a)(this,e),Object(X.a)(this,"preUrl",r,this),Object(X.a)(this,"preImgUrl",c,this),Object(X.a)(this,"musicPlayer",i,this),this.handlePlay=function(){var e,a,n;(console.log("\u6b4c\u66f2\u64ad\u653e\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),duration:null===(a=t.musicPlayer)||void 0===a?void 0:a.duration(),playing:!0,change:!1}),t.musicInfo&&!t.musicInfo.duration)&&(t.musicInfo.duration=Number(null===(n=t.musicPlayer)||void 0===n?void 0:n.duration()));var r=window.navigator,c=window.MediaMetadata;r.mediaSession&&t.musicInfo&&(r.mediaSession.metadata=new c({title:t.musicInfo.name,artist:t.musicInfo.artist,album:t.musicInfo.album,artwork:[{src:t.musicInfo.pictureUrl||"",type:"image/jpeg",sizes:"512x512"}]}))},this.handlePause=function(){var e;console.log("\u6b4c\u66f2\u6682\u505c\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1})},this.handleEnd=function(){var e;t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1}),requestAnimationFrame(t.handlePlaying),console.log("\u6b4c\u66f2\u64ad\u653e\u5b8c\u4e86"),t.handleNextMusic()},this.handleStop=function(){var e;console.log("\u6b4c\u66f2\u505c\u6b62"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1})},this.handlePlaying=function(){if(!t.musicData.change&&t.musicPlayer&&t.musicPlayer.playing()){t.updatedMusicData({type:"update",currentTime:t.musicPlayer.seek()});var e=window.navigator;e.mediaSession&&t.musicPlayer&&e.mediaSession.setPositionState({duration:Number(t.musicPlayer.duration()),playbackRate:1,position:t.musicPlayer.seek()}),requestAnimationFrame(t.handlePlaying)}},Object(X.a)(this,"musicInfo",l,this),Object(X.a)(this,"musicData",s,this),Object(X.a)(this,"musicPlayerStats",u,this),Object(X.a)(this,"musicPlayList",o,this),Object(X.a)(this,"updateMusicPlayList",m,this),this.handleNextMusic=function(){t.musicPlayer&&t.musicPlayer.stop();for(var e=0,a=t.musicPlayList.length-1;e<t.musicPlayList.length&&t.musicPlayList[e].id!==t.musicData.id;)e++;var n,r=e+1;(r=r>a?r-a-1:r,t.musicPlayList[r].id===t.musicData.id)?null===(n=t.musicPlayer)||void 0===n||n.play():de.updatedMusicData({id:t.musicPlayList[r].id})},this.handlePreMusic=function(){t.musicPlayer&&t.musicPlayer.stop();for(var e=0,a=t.musicPlayList.length-1;e<t.musicPlayList.length&&t.musicPlayList[e].id!==t.musicData.id;)e++;var n,r=e-1;(r=r<0?a:r,t.musicPlayList[r].id===t.musicData.id)?null===(n=t.musicPlayer)||void 0===n||n.play():de.updatedMusicData({id:t.musicPlayList[r].id})},Object(X.a)(this,"localMusicList",p,this),Object(X.a)(this,"localMusicLoading",f,this),Object(X.a)(this,"localAlbumMap",d,this),Object(X.a)(this,"updateLocalAlbumList",b,this),Object(X.a)(this,"updateLocalMusicList",h,this),Object(X.a)(this,"deleteMusic",y,this),this.localMusicLrcList=[],Object(X.a)(this,"localMusicLrcLoading",g,this),Object(X.a)(this,"updateLocalMusicLrcList",v,this),Object(X.a)(this,"deleteLrc",E,this),Object(X.a)(this,"musicColor",j,this),Object(X.a)(this,"updateMusicColor",O,this)}return Object(ee.a)(e,[{key:"updatePreUrl",value:function(e){this.preUrl=e}},{key:"updatePreImgUrl",value:function(e){this.preImgUrl.push(e),this.preImgUrl.length>=5&&URL.revokeObjectURL(this.preImgUrl.shift())}},{key:"createdPlayer",value:function(){var e,t=this;if(this.musicInfo){this.updatedMusicData({playing:!1});var a=URL.createObjectURL(this.musicInfo.music);this.preUrl&&URL.revokeObjectURL(this.preUrl),this.updatePreUrl(a),this.updatePreImgUrl(this.musicInfo.pictureUrl||""),this.musicPlayer=new ne.Howl({autoplay:!0,src:a,html5:!0,format:[(e=this.musicInfo.codec.toLowerCase()||String(this.musicInfo.fileType).toLowerCase(),"mpeg 1 layer 3"===e?"mp3":e)],volume:1,onplay:this.handlePlay,onpause:this.handlePause,onend:this.handleEnd,onstop:this.handleStop});var n=window.navigator;n.mediaSession&&(n.mediaSession.setActionHandler("play",(function(){var e;null===(e=t.musicPlayer)||void 0===e||e.play()})),n.mediaSession.setActionHandler("pause",(function(){var e;null===(e=t.musicPlayer)||void 0===e||e.pause()})),n.mediaSession.setActionHandler("stop",(function(){var e;null===(e=t.musicPlayer)||void 0===e||e.stop()})),n.mediaSession.setActionHandler("seekto",(function(e){var a,n=Number(e.seekTime);null===(a=t.musicPlayer)||void 0===a||a.seek(n)})),n.mediaSession.setActionHandler("seekbackward",(function(e){var a,n;t.updatedMusicData({change:!0});var r=Number(null===(a=t.musicPlayer)||void 0===a?void 0:a.seek())-10;null===(n=t.musicPlayer)||void 0===n||n.seek(r),t.updatedMusicData({change:!1}),console.log("\u5feb\u9000")})),n.mediaSession.setActionHandler("seekforward",(function(e){var a,n;t.updatedMusicData({change:!0});var r=Number(null===(a=t.musicPlayer)||void 0===a?void 0:a.seek())+10;null===(n=t.musicPlayer)||void 0===n||n.seek(r),t.updatedMusicData({change:!1}),console.log("\u5feb\u8fdb")})),n.mediaSession.setActionHandler("previoustrack",this.handlePreMusic),n.mediaSession.setActionHandler("nexttrack",this.handleNextMusic))}}},{key:"destroyPlayer",value:function(){this.musicPlayer=null}},{key:"updatedMusicInfo",value:function(e){0===e.picture.length&&(e.picture=["".concat(".","/images/music-no.jpeg")]),this.musicInfo=e}},{key:"updatedMusicData",value:function(e){var t=this;"update"!==e.type?(e.hasOwnProperty("min")&&(e.min?document.body.classList.remove("dialog-screen"):document.body.classList.add("dialog-screen")),e.change||setTimeout((function(){requestAnimationFrame(t.handlePlaying)}),100),this.musicData=Object(W.a)(Object(W.a)({},this.musicData),e)):this.musicData.currentTime=e.currentTime}}]),e}(),r=Object(te.a)(n.prototype,"preUrl",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(te.a)(n.prototype,"updatePreUrl",[ae.f],Object.getOwnPropertyDescriptor(n.prototype,"updatePreUrl"),n.prototype),c=Object(te.a)(n.prototype,"preImgUrl",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(te.a)(n.prototype,"updatePreImgUrl",[ae.f],Object.getOwnPropertyDescriptor(n.prototype,"updatePreImgUrl"),n.prototype),i=Object(te.a)(n.prototype,"musicPlayer",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(te.a)(n.prototype,"createdPlayer",[ae.f],Object.getOwnPropertyDescriptor(n.prototype,"createdPlayer"),n.prototype),Object(te.a)(n.prototype,"destroyPlayer",[ae.f],Object.getOwnPropertyDescriptor(n.prototype,"destroyPlayer"),n.prototype),l=Object(te.a)(n.prototype,"musicInfo",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(te.a)(n.prototype,"updatedMusicInfo",[ae.f],Object.getOwnPropertyDescriptor(n.prototype,"updatedMusicInfo"),n.prototype),s=Object(te.a)(n.prototype,"musicData",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:"",playing:!1,duration:0,currentTime:0,change:!1,min:!0}}}),Object(te.a)(n.prototype,"updatedMusicData",[ae.f],Object.getOwnPropertyDescriptor(n.prototype,"updatedMusicData"),n.prototype),u=Object(te.a)(n.prototype,"musicPlayerStats",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{loop:"random"}}}),o=Object(te.a)(n.prototype,"musicPlayList",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=Object(te.a)(n.prototype,"updateMusicPlayList",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.musicPlayList=t}}}),p=Object(te.a)(n.prototype,"localMusicList",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=Object(te.a)(n.prototype,"localMusicLoading",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(te.a)(n.prototype,"localAlbumMap",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),b=Object(te.a)(n.prototype,"updateLocalAlbumList",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=new Map;e.localMusicList.forEach((function(e){var a;if(""!==e.album){var n=null!==(a=t.get(e.album))&&void 0!==a?a:[];t.set(e.album,[].concat(Object(Q.a)(n),[e]))}})),e.localAlbumMap=t}}}),h=Object(te.a)(n.prototype,"updateLocalMusicList",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(z.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.localMusicLoading=!0,t.next=3,oe();case 3:e.localMusicList=t.sent,e.updateMusicPlayList(Object(A.cloneDeep)(e.localMusicList)),e.updateLocalAlbumList(),e.localMusicLoading=!1;case 7:case"end":return t.stop()}}),t)})))}}),y=Object(te.a)(n.prototype,"deleteMusic",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(z.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue(a);case 3:fe.b.success("\u5220\u9664\u6210\u529f"),e.updateLocalMusicList(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),fe.b.error("\u5220\u9664\u5931\u8d25");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),g=Object(te.a)(n.prototype,"localMusicLrcLoading",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object(te.a)(n.prototype,"updateLocalMusicLrcList",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(z.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.localMusicLrcLoading=!0,t.next=3,le();case 3:e.localMusicLrcList=t.sent,e.localMusicLrcLoading=!1;case 5:case"end":return t.stop()}}),t)})))}}),E=Object(te.a)(n.prototype,"deleteLrc",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(z.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe(a);case 3:fe.b.success("\u5220\u9664\u6210\u529f"),e.updateLocalMusicLrcList(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),fe.b.error("\u5220\u9664\u5931\u8d25");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),j=Object(te.a)(n.prototype,"musicColor",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#1890ff"}}),O=Object(te.a)(n.prototype,"updateMusicColor",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.musicColor=t,document.documentElement.style.setProperty("--primary-color",t)}}}),n),be=de,he=function(e){var t,a,n=Object(L.useState)(0),r=Object(D.a)(n,2),c=r[0],i=r[1];return Object(L.useEffect)((function(){var t,a=(null===(t=e.currentInfo)||void 0===t?void 0:t.duration)||e.musicPlayingInfo.duration||0;i(e.currentTime/a*100)}),[e.currentInfo,e.currentTime,e.musicPlayingInfo.duration]),N.a.createElement("section",{className:"player-control"},e.min?N.a.createElement("section",{className:"control-min"},N.a.createElement("section",{className:"control-icon-list"},N.a.createElement("p",{onClick:be.handlePreMusic},N.a.createElement(V.a,null)),N.a.createElement("p",{className:"icon-play-bg",onClick:function(){e.isPlaying?e.handlePause():e.handlePlay()}},e.isPlaying?N.a.createElement(Z.a,null):N.a.createElement($.a,null)),N.a.createElement("p",{onClick:be.handleNextMusic},N.a.createElement(G.a,null))),N.a.createElement("section",{className:"control-progress"},N.a.createElement(J,{range:Number(c.toFixed(2)),handleChanging:e.handleChanging,setChange:e.setChange})),N.a.createElement("section",{className:"line-left"},N.a.createElement("span",null," ",K(e.currentTime||0)," "),N.a.createElement("span",null,"/"),N.a.createElement("span",null," ",K((null===(t=e.currentInfo)||void 0===t?void 0:t.duration)||e.musicPlayingInfo.duration||0)," "))):N.a.createElement("section",{className:"control"},N.a.createElement("section",{className:"control-progress"},N.a.createElement(J,{range:Number(c.toFixed(2)),handleChanging:e.handleChanging,setChange:e.setChange})),N.a.createElement("section",{className:"control-line"},N.a.createElement("section",{className:"line-left"},N.a.createElement("span",null," ",K(e.currentTime||0)," "),N.a.createElement("span",null," ",K((null===(a=e.currentInfo)||void 0===a?void 0:a.duration)||e.musicPlayingInfo.duration||0)," ")),N.a.createElement("section",{className:"line-center"},N.a.createElement("section",{className:"control-icon-list"},N.a.createElement("p",{onClick:be.handlePreMusic},N.a.createElement(V.a,null)),N.a.createElement("p",{className:"icon-play-bg",onClick:function(){e.isPlaying?e.handlePause():e.handlePlay()}},e.isPlaying?N.a.createElement(Z.a,null):N.a.createElement($.a,null)),N.a.createElement("p",{onClick:be.handleNextMusic},N.a.createElement(G.a,null)))))))},ye=(a(225),function(e){var t=Object(L.useState)([]),a=Object(D.a)(t,2),n=a[0],r=a[1],c=Object(L.useState)(-1),i=Object(D.a)(c,2),l=i[0],s=i[1],u=Object(L.useRef)(null),o=Object(L.useState)(!0),m=Object(D.a)(o,2),p=m[0],f=m[1],d=Object(L.useState)({backgroundImage:""}),b=Object(D.a)(d,2),h=b[0],y=b[1],g=Object(L.useState)(0),v=Object(D.a)(g,2),E=v[0],j=v[1];Object(L.useEffect)((function(){r(function(e){var t=[];console.log("\u8fdb\u5165\u9010\u5b57\u89e3\u6790\u7684\u6b4c\u8bcd\u54e6");for(var a=e.split("\n"),n=0;n<a.length;){var r=a[n].replace(/\s/g,""),c=r.match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),i=r.match(/(?<=\])\S\s?(?=\[)/g);if(c&&i){for(var l=[],s=0;s<i.length;s++)l.push({text:i[s],start:F(c[s]),end:F(c[s+1])});t.push(l)}n++}return t}(e.lrc))}),[e.lrc]),Object(L.useEffect)((function(){if(s(function(e,t){if(e.length<=0)return-1;for(var a=0;a<e.length&&!(e[a][0].start>t);)a++;return a-1}(n,e.currentTime)),n[l]&&n[l].length){var t=n[l].map((function(e){return e.text}));e.setCurrentLrc(t.join(""))}var a=function(e,t){if(!e)return 0;for(var a=0,n=0;n<e.length&&!(e[n].start>t);)n++;if(n<=0)return 0;if(n>=e.length)return 100;a=n*(100/e.length);var r=e[n-1];if(t>=r.end)return 100;if(t<=r.start)return(n-1)*(100/e.length);var c=r.end-r.start;return a+=(t-r.start)/c*(100/e.length)}(n[l],e.currentTime);y({backgroundImage:"-webkit-linear-gradient(left,".concat(e.color," ").concat(a,"%,#ffffff ").concat(a,"%)")})}),[l,n,e]),Object(L.useEffect)((function(){if(u&&p&&e.isPlaying){var t=u.current,a=E*(l-1)||0;t&&t.scrollTo({top:a,behavior:"smooth"})}}),[p,E,l,e.isPlaying]);var O=function(e){return l===e?"choose-lrc-line":""},w=function(){j(7.5*document.body.offsetHeight/100)};return Object(L.useEffect)((function(){return window.addEventListener("resize",w),w(),function(){window.removeEventListener("resize",w)}}),[]),N.a.createElement("section",{className:"music-lrc-word",ref:u,onMouseEnter:function(){f(!1)},onMouseLeave:function(){if(f(!0),e.isPlaying){var t=u.current,a=E*(l-1)||0;t&&t.scrollTo({top:a,behavior:"auto"})}}},N.a.createElement("section",{className:"lrc-list"},n.map((function(e,t){return N.a.createElement("section",{key:t,className:"lrc-line"},N.a.createElement("p",{className:O(t),style:l===t?h:{}},e.map((function(e,t){return N.a.createElement("span",{key:t},e.text)}))))}))))}),ge=a(202),ve=a(163),Ee=a(144),je=a(79),Oe=new ge.a,we=Object(je.a)((function(){var e,t=be.musicPlayer,a=be.musicInfo,n=be.musicData,r=Object(L.useState)(""),c=Object(D.a)(r,2),i=c[0],l=c[1],s=Object(L.useRef)(!1),u=be.musicColor,o=function(e){var t=((null===a||void 0===a?void 0:a.duration)||0)*e/100;be.updatedMusicData({currentTime:t})},m=function(e){e||(null===t||void 0===t||t.seek(n.currentTime),n.playing||null===t||void 0===t||t.play()),be.updatedMusicData({change:e})},p=Object(L.useCallback)(Object(z.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(z.a)(T.a.mark((function e(t,a){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(n.id);case 2:(r=e.sent)?t(r):a("\u6b4c\u66f2\u4fe1\u606f\u83b7\u53d6\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),[n.id]),f=Object(L.useCallback)((function(){t&&(t.playing()?t.pause():t.play())}),[t]),d=Object(L.useCallback)(Object(z.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:be.updatedMusicInfo(t),Oe.getColorAsync(t.pictureUrl||"").then((function(e){be.updateMusicColor(Object(ve.b)(.8,Object(ve.a)(.5,e.rgba)))})).catch((function(e){be.updateMusicColor("#1890ff")}));case 9:case"end":return e.stop()}}),e)}))),[p,n.id]),b=Object(L.useCallback)((function(e){32===e.keyCode&&(e.preventDefault(),f())}),[f]),h=function(){be.updatedMusicData({min:!n.min})};return Object(L.useEffect)((function(){console.log("useEffect-getMusicInfo"),d()}),[d]),Object(L.useEffect)((function(){return console.log("useEffect-create"),a&&!t&&(l(""),console.log("\u521b\u5efa\u97f3\u4e50\u5b9e\u4f8b"),be.createdPlayer()),function(){t&&(console.log("created destroy"),be.updatedMusicData({playing:!1}),be.destroyPlayer())}}),[a,t]),Object(L.useEffect)((function(){console.log("music-change-key"),s.current=n.change}),[n.change]),Object(L.useEffect)((function(){return window.addEventListener("keydown",b),function(){window.removeEventListener("keydown",b)}}),[b]),N.a.createElement("section",{className:"player"},n.min?N.a.createElement("section",{className:"player-min"},a?N.a.createElement("section",{className:"player-layout"},N.a.createElement("section",{className:"layout-left"},N.a.createElement("section",{className:"music-img",onClick:h},N.a.createElement("img",{src:a.pictureUrl?a.pictureUrl:"./images/music-no.jpeg",alt:""})),N.a.createElement("section",{className:"player-info"},N.a.createElement("p",{className:"music-name"},a.name),N.a.createElement("p",{className:"music-artist"},a.artist," - ",a.album))),N.a.createElement("section",{className:"music-progress"},N.a.createElement(he,{handlePlay:f,handlePause:f,currentInfo:a||null,musicPlayingInfo:n,currentTime:n.currentTime,handleChanging:o,setChange:m,min:n.min,isPlaying:n.playing}))):N.a.createElement("section",{className:"player-layout"},"\u8bf7\u9009\u62e9\u6b4c\u66f2\u8fdb\u884c\u64ad\u653e")):"",N.a.createElement("section",{className:"player-max ".concat(n.min?"player-max-min":"")},N.a.createElement("section",{className:"status-control",onClick:h},N.a.createElement(Ee.a,null)),N.a.createElement("section",{className:"player-bg",style:{backgroundImage:"url(".concat((null===a||void 0===a?void 0:a.pictureUrl)||"./images/music-no.jpeg",")")}}),N.a.createElement("section",{className:"player-fade"}),N.a.createElement("section",{className:"player-layout"},a?N.a.createElement("section",{className:"player-box"},N.a.createElement("section",{className:"player-left"},N.a.createElement("section",{className:"player-line"},N.a.createElement("img",{src:a.pictureUrl?a.pictureUrl:"./images/music-no.jpeg",alt:""})),N.a.createElement("section",{className:"player-line"},N.a.createElement("section",{className:"player-info"},N.a.createElement("p",{className:"music-name"},a.name),N.a.createElement("p",{className:"music-artist"},a.artist," - ",a.album),N.a.createElement("p",{className:"music-current-lrc",dangerouslySetInnerHTML:{__html:i}}))),N.a.createElement(he,{handlePlay:f,handlePause:f,currentInfo:a||null,musicPlayingInfo:n,currentTime:n.currentTime,handleChanging:o,setChange:m,isPlaying:n.playing})),N.a.createElement("section",{className:"player-right"},(null===(e=a.lrc)||void 0===e?void 0:e.match(/\](\S)\[/g))?N.a.createElement(ye,{setCurrentLrc:l,color:u,lrc:a.lrc||"",currentInfo:a||null,currentTime:n.currentTime,isPlaying:n.playing}):N.a.createElement(B,{setCurrentLrc:l,color:u,lrc:a.lrc||"",currentInfo:a||null,currentTime:n.currentTime,isPlaying:n.playing}))):"")))})),ke=a(407),xe=a(52),Pe=a(416),Le=(a(226),["mp3","ogg","wav","aac","flac","dolby","opus","webm","alac"]),Ne=["lrc","txt"],Me=a(159),Ie=a.n(Me),Ce=a(203),Ue=new(w=function e(){var t=this;Object(Y.a)(this,e),Object(X.a)(this,"isUploading",k,this),Object(X.a)(this,"uploadList",x,this),Object(X.a)(this,"addUploadTask",P,this),this.checkUpload=Object(z.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!t.isUploading&&t.uploadList.length&&t.handleUpload();case 1:case"end":return e.stop()}}),e)}))),this.handleUpload=Object(z.a)(T.a.mark((function e(){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isUploading=!0,a=t.uploadList.shift(),e.next=5,Te(a);case 5:t.isUploading=!1,t.checkUpload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))},k=Object(te.a)(w.prototype,"isUploading",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(te.a)(w.prototype,"uploadList",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=Object(te.a)(w.prototype,"addUploadTask",[ae.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.uploadList.push(t),e.checkUpload()}}}),w),Se=function(e){return Ue.addUploadTask(e),!1},Te=function(){var e=Object(z.a)(T.a.mark((function e(t){var a,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.name.split("."),n=a[a.length-1],r=t.name.replace(".".concat(n),""),!Le.includes(n)){e.next=7;break}return e.next=6,ze(t);case 6:return e.abrupt("return",!1);case 7:if(!Ne.includes(n)){e.next=11;break}return e.next=10,De(t);case 10:return e.abrupt("return",!1);case 11:return fe.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(n,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(r)),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(z.a)(T.a.mark((function e(t){var a,n,r,c,i,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.split("."),n=a[a.length-1],r=t.name.replace(".".concat(n),""),e.prev=3,e.next=6,R(t,!0);case 6:return c=e.sent,e.next=9,Ce.parseBlob(c);case 9:i=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),fe.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(n,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(r)),e.abrupt("return");case 16:return e.prev=16,s=i,(l={name:Object(A.get)(s,"common.title",""),album:Object(A.get)(s,"common.album",""),albumartist:Object(A.get)(s,"common.albumartist",""),artist:Object(A.get)(s,"common.artist",""),artists:Object(A.get)(s,"common.artists",[]),comment:Object(A.get)(s,"common.comment",[]),date:Object(A.get)(s,"common.date",0),picture:Object(A.get)(s,"common.picture",[]).map((function(e){return"data:".concat(e.format,";base64,").concat(H(e.data))})),codec:Object(A.get)(s,"format.codec",""),duration:Object(A.get)(s,"format.duration",0),sampleRate:Object(A.get)(s,"format.sampleRate",""),lrc:""}).fileName=r,l.fileType=n,l.fileSize=Ie()(t.size),l.size=t.size,l.name=l.name||l.fileName||"\u672a\u77e5\u6b4c\u66f2",e.next=25,se(l,c);case 25:fe.b.success("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f")),console.log("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f")),be.updateLocalMusicList(),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(16),fe.b.warning(e.t1);case 33:case"end":return e.stop()}var s}),e,null,[[3,12],[16,30]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(z.a)(T.a.mark((function e(t){var a,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.split("."),n=a[a.length-1],r=t.name.replace(".".concat(n),""),c="",e.prev=4,e.next=7,R(t,!1);case 7:c=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),fe.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(n,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(r)),e.abrupt("return");case 14:return e.prev=14,e.next=17,ie({content:c,fileName:r,fileType:n,size:t.size,fileSize:Ie()(t.size)});case 17:be.updateLocalMusicLrcList(),fe.b.success("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f")),console.log("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f")),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(14),fe.b.warning(e.t1);case 25:case"end":return e.stop()}}),e,null,[[4,10],[14,22]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){return N.a.createElement("section",{className:"page-upload"},N.a.createElement("section",{className:"upload-line"},N.a.createElement(ke.a,{beforeUpload:Se,showUploadList:!1,accept:function(){var e=Le.concat(Ne);return(e=e.map((function(e){return e=".".concat(e)}))).join(",")}(),multiple:!0},N.a.createElement(xe.a,{icon:N.a.createElement(Pe.a,null)},"\u70b9\u51fb\u4e0a\u4f20\u672c\u5730\u6b4c\u66f2\u6216\u8005\u6b4c\u8bcd")),N.a.createElement("p",{className:"tips"},N.a.createElement("span",null,"\u652f\u6301\u6b4c\u66f2\u683c\u5f0f ",Le.join("\uff0c")),N.a.createElement("span",null,"\u652f\u6301\u6b4c\u8bcd\u683c\u5f0f ",Ne.join("\uff0c")))))},Re=a(408),He=a(410),Ke=a(406),Fe=Object(je.a)((function(){var e=[{title:"\u6b4c\u8bcd\u540d",dataIndex:"fileName",key:"fileName"},{title:"\u5927\u5c0f",dataIndex:"fileSize",key:"fileSize",sorter:function(e,t){return e.size-t.size}},{title:"\u64cd\u4f5c",dataIndex:"name",key:"control",render:function(e,t){return N.a.createElement("p",null,N.a.createElement(He.a,{placement:"topRight",title:"\u786e\u5b9a\u5220\u9664-".concat(t.fileName,"-\u6b4c\u8bcd\u561b"),onConfirm:function(){return n(t.fileName||"")},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},N.a.createElement("span",{className:"link"},"\u5220\u9664")))}}],t=be.localMusicLrcList,a=be.localMusicLrcLoading,n=function(e){be.deleteLrc(e)};return Object(L.useEffect)((function(){console.log("\u83b7\u53d6\u6b4c\u8bcd\u5217\u8868"),be.updateLocalMusicLrcList()}),[]),N.a.createElement("section",{className:"lrc-list"},N.a.createElement(Ke.a,{dataSource:t,columns:e,pagination:!1,rowKey:"fileName",loading:a}))})),qe=a(411),Be=(a(389),a(390),function(){return N.a.createElement("p",{className:"playing-icon"},N.a.createElement("span",{className:"rect1"}),N.a.createElement("span",{className:"rect2"}),N.a.createElement("span",{className:"rect3"}),N.a.createElement("span",{className:"rect4"}),N.a.createElement("span",{className:"rect5"}))}),_e=Object(je.a)((function(){var e=be.musicData,t=be.localMusicList,a=be.localMusicLoading,n=[{title:"\u6b4c\u66f2",dataIndex:"name",key:"name",width:300,render:function(t,a){return N.a.createElement("section",{className:"list-play"},(null===e||void 0===e?void 0:e.id)===a.id&&e.playing?N.a.createElement("span",null,N.a.createElement(Z.a,{className:"icon",onClick:function(){return c()}})):N.a.createElement("span",null,N.a.createElement($.a,{className:"icon",onClick:function(){return r(a)}})),N.a.createElement("span",{className:"song-name"},t),(null===e||void 0===e?void 0:e.id)===a.id&&e.playing?N.a.createElement(Be,null):"")}},{title:"\u6b4c\u624b",dataIndex:"artist",key:"artist"},{title:"\u4e13\u8f91",dataIndex:"album",key:"album"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",render:function(e){return K(e)||"\u672a\u77e5"},sorter:function(e,t){return Number(e.duration)-Number(t.duration)}},{title:"\u683c\u5f0f",dataIndex:"codec",key:"codec",render:function(e,t){return e||t.fileType}},{title:"\u5927\u5c0f",dataIndex:"fileSize",key:"fileSize",sorter:function(e,t){return Number(e.size)-Number(t.size)}},{title:"\u5173\u8054\u6b4c\u8bcd\u540d",dataIndex:"lrcKey",key:"lrcKey",render:function(e,t){return e||N.a.createElement(qe.b,{size:"middle"},N.a.createElement("span",{className:"action"},"\u5173\u8054\u6b4c\u8bcd"))}},{title:"\u64cd\u4f5c",dataIndex:"name",key:"control",render:function(e,t){return N.a.createElement("p",null,N.a.createElement(He.a,{placement:"topRight",title:"\u786e\u5b9a\u5220\u9664-".concat(t.name,"-\u8fd9\u9996\u6b4c\u561b"),onConfirm:function(){return i(t.id||"")},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},N.a.createElement("span",{className:"link"},"\u5220\u9664")))}}],r=function(t){var a;t.id!==e.id?(null===(a=be.musicPlayer)||void 0===a||a.stop(),setTimeout((function(){be.updatedMusicData({id:t.id})}),100)):be.musicPlayer&&be.musicPlayer.play()},c=function(){var e;null===(e=be.musicPlayer)||void 0===e||e.pause()},i=function(e){be.deleteMusic(e)};return Object(L.useEffect)((function(){console.log("\u83b7\u53d6\u97f3\u4e50\u5217\u8868"),be.updateLocalMusicList()}),[]),N.a.createElement("section",{className:"lrc-list-table"},N.a.createElement(Ke.a,{dataSource:t,columns:n,pagination:!1,rowKey:"fileName",loading:a}))})),Je=(a(391),Object(je.a)((function(){var e=be.localAlbumMap,t=Object(Q.a)(e.keys()),a=be.musicData;return Object(L.useEffect)((function(){console.log("\u83b7\u53d6\u97f3\u4e50\u5217\u8868"),be.updateLocalMusicList()}),[]),N.a.createElement("section",{className:"album-list"},t.map((function(t){var n=e.get(t),r=n[0];return N.a.createElement("section",{key:t,className:"album-item",style:{backgroundImage:"url(".concat(r.picture||"./images/music-no.jpeg",")")}},N.a.createElement("section",{className:"mask"}),N.a.createElement("section",{className:"album-show"},N.a.createElement("p",{className:"album-title"},t),N.a.createElement("section",{className:"music-list"},n.map((function(e){return N.a.createElement("p",{key:e.name,className:"music-item ".concat(e.id===a.id?"active":""),onClick:function(){return function(e){var t,n;e.id!==a.id?(null===(t=be.musicPlayer)||void 0===t||t.stop(),setTimeout((function(){be.updatedMusicData({id:e.id})}),100)):be.musicPlayer&&(null===(n=be.musicPlayer)||void 0===n||n.stop(),be.musicPlayer.play())}(e)}},N.a.createElement("span",null,e.name))})))))})))}))),Ve=Re.a.TabPane,Ze=function(){var e=Object(U.f)(),t=new URLSearchParams(Object(U.g)().search),a=Object(U.g)(),n=Object(L.useState)(""),r=Object(D.a)(n,2),c=r[0],i=r[1],l=function(){var e=Object(z.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(z.a)(T.a.mark((function e(t,a){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:return n=e.sent,e.next=6,le();case 6:return r=e.sent,n=n.map((function(e){return r.forEach((function(t){t.fileName.includes(e.name)&&(e.lrcKey=t.fileName)})),e})),e.next=10,ce.a.setItem("music-list",n);case 10:t("success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}());case 2:fe.b.success("\u5173\u8054\u6210\u529f"),be.updateLocalMusicList(),be.updateLocalMusicLrcList();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(L.useEffect)((function(){if(t){var e=t.get("type")||"";["music","lrc","album"].includes(e)?i(e):i("album")}}),[t]);return N.a.createElement("section",{className:"page-local"},N.a.createElement("section",{className:"local-upload"},N.a.createElement(Ae,null),N.a.createElement("section",null,N.a.createElement(xe.a,{onClick:l},"\u81ea\u52a8\u5173\u8054\u6b4c\u8bcd"),N.a.createElement(He.a,{placement:"topLeft",title:"\u6e05\u7a7a\u6570\u636e\u5e93\u5c31\u65e0\u6cd5\u6062\u590d\u54e6\uff0c\u8c28\u614e\u64cd\u4f5c",onConfirm:function(){ce.a.clear(),be.updateLocalMusicList(),be.updateLocalMusicLrcList()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},N.a.createElement(xe.a,{style:{marginLeft:"30px"}},"\u6e05\u7a7a\u6570\u636e\u5e93")),N.a.createElement("p",{className:"tips"},"\u5173\u8054\u89c4\u5219: \u5f53\u524d\u6b4c\u66f2\u6ca1\u6709\u6b4c\u8bcd\uff0c\u540c\u65f6\u53ef\u4ee5\u627e\u5230\u6b4c\u8bcd\u540d\uff0c\u5305\u542b\u5b8c\u6574\u6b4c\u66f2\u540d"))),N.a.createElement("section",{className:"local-content"},N.a.createElement(Re.a,{activeKey:c,onChange:function(t){e.push("".concat(a.pathname,"?type=").concat(t))}},N.a.createElement(Ve,{tab:"\u4e13\u8f91\u5217\u8868",key:"album"},N.a.createElement(Je,null)),N.a.createElement(Ve,{tab:"\u97f3\u4e50\u5217\u8868",key:"music"},N.a.createElement(_e,null)),N.a.createElement(Ve,{tab:"\u6b4c\u8bcd\u5217\u8868",key:"lrc"},N.a.createElement(Fe,null)))))},$e=function(){return N.a.createElement("p",null,"\u6d4b\u8bd5\u5728\u7ebf\u97f3\u4e50\u64ad\u653e")},Ge=(a(395),function(){return N.a.createElement("section",{className:"page-home"},N.a.createElement("section",{className:"wrapper-box"},N.a.createElement("section",{className:"nav"},N.a.createElement("p",{className:"nav-item"},N.a.createElement(C.b,{to:"/"},"\u672c\u5730\u97f3\u4e50")),N.a.createElement("p",{className:"nav-item"},N.a.createElement(C.b,{to:"/like",exact:!0},"\u5728\u7ebf\u97f3\u4e50"))),N.a.createElement("section",{className:"music-box"},N.a.createElement(U.c,null,N.a.createElement(U.a,{path:"/like",exact:!0},N.a.createElement($e,null)),N.a.createElement(U.a,{path:"/",exact:!0},N.a.createElement(Ze,null))))),N.a.createElement(we,null))});a(396);var Qe=function(){return N.a.createElement("section",{className:"hzfe-music"},N.a.createElement(C.a,null,N.a.createElement(U.c,null,N.a.createElement(U.a,{path:"/",exact:!0},N.a.createElement(Ge,null)),N.a.createElement(U.a,{path:"*",exact:!0},N.a.createElement(Ge,null)))))},We=a(29),Xe=a(210),Ye=a.n(Xe);a(397),a(398);ce.a.config({name:"HZFE-MUSIC"}),I.a.render(N.a.createElement(We.a,{locale:Ye.a},N.a.createElement(Qe,null)),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.cd8a6bf9.chunk.js.map