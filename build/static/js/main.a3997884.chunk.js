(this["webpackJsonphzfe-music"]=this["webpackJsonphzfe-music"]||[]).push([[0],{209:function(e,t,a){e.exports=a(398)},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},219:function(e,t,a){},303:function(e,t){},305:function(e,t){},313:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var n,c,r,i,s,l,u,o,m,f,p,d=a(0),b=a.n(d),g=a(30),h=a.n(g),y=a(97),v=a(34),E=a(7),j=a.n(E),O=a(33),N=a(37),w=(a(214),a(54)),x=function(){var e=Object(O.a)(j.a.mark((function e(t){var a,n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(n.length>1&&void 0!==n[1])||n[1],t){e.next=3;break}return e.abrupt("return","");case 3:return e.abrupt("return",new Promise((function(e,n){var c=new FileReader;c.onload=function(t){var n=t.target;e(a?n.result?new Blob([n.result]):null:n.result)},c.onerror=n,a?c.readAsArrayBuffer(t):c.readAsText(t)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){for(var t,a=0,n=e.length,c="";a<n;)t=e.subarray(a,Math.min(a+32768,n)),c+=String.fromCharCode.apply(null,t),a+=32768;return btoa(c)},P=function(e){var t=Math.floor(e/60)||0,a=~~(e-60*t)||0;return(t<10?"0":"")+t+":"+(a<10?"0":"")+a},L=function(e){var t,a=(null===(t=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(e))||void 0===t?void 0:t.map((function(e){return e?Number(e):0})))||[];return 60*a[1]+a[2]+(a[4]?a[4]/(2===(a[4]+"").length?100:1e3):0)},M=(a(215),function(e){var t=Object(d.useState)([]),a=Object(N.a)(t,2),n=a[0],c=a[1],r=Object(d.useState)(-1),i=Object(N.a)(r,2),s=i[0],l=i[1],u=Object(d.useRef)(null),o=Object(d.useState)(!0),m=Object(N.a)(o,2),f=m[0],p=m[1],g=Object(d.useState)(0),h=Object(N.a)(g,2),y=h[0],v=h[1];Object(d.useEffect)((function(){c(function(e){var t=e;if(t){for(var a=(t=t.replace(/([^\]^\n])\[/g,(function(e,t){return t+"\n["}))).split("\n"),n=[],c=a.length,r=0;r<c;r++){var i=a[r].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),s=a[r].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(i)for(var l=i.length,u=0;u<l;u++){var o=L(i[u]);n.push({time:o,text:s})}}return(n=n.filter((function(e){return e.text}))).sort((function(e,t){return e.time-t.time})),n}return[]}(e.lrc))}),[e.lrc]),Object(d.useEffect)((function(){l(function(e,t){if(e.length<=0)return-1;for(var a=0;a<e.length&&!(e[a].time>t);)a++;return a-1}(n,e.currentTime)),n.length&&n[s]&&e.setCurrentLrc(n[s].text)}),[s,n,e,e.currentTime]),Object(d.useEffect)((function(){if(u&&f&&e.isPlaying){var t=u.current,a=y*(s-1)||0;t&&t.scrollTo({top:a,behavior:"smooth"})}}),[f,y,s,e.isPlaying]);var E=function(e){return s===e?"choose-lrc":""},j=function(){v(7.5*document.body.offsetHeight/100)};return Object(d.useEffect)((function(){return window.addEventListener("resize",j),j(),function(){window.removeEventListener("resize",j)}}),[]),b.a.createElement("section",{className:"music-lrc",ref:u,onMouseEnter:function(){p(!1)},onMouseLeave:function(){if(e.isPlaying){var t=u.current,a=y*(s-1)||0;t&&t.scrollTo({top:a,behavior:"auto"}),p(!0)}else p(!0)}},b.a.createElement("section",{className:"lrc-list"},n.map((function(t,a){return b.a.createElement("p",{key:"".concat(t.time).concat(s).concat(t.text),style:{color:s===a?e.color:""},className:E(a)},t.text)}))))}),I=(a(216),a(217),a(403)),C=function(e){var t=Object(d.useState)(0),a=Object(N.a)(t,2),n=a[0],c=a[1],r=Object(d.useState)(!1),i=Object(N.a)(r,2),s=i[0],l=i[1];Object(d.useEffect)((function(){s||c(e.range)}),[s,e.range]);return b.a.createElement("section",{className:"progress"},b.a.createElement(I.a,{defaultValue:0,value:n,onChange:function(t){l(!0),e.setChange(!0),c(t),e.handleChanging(t)},onAfterChange:function(t){e.setChange(!1),l(!1)},tooltipVisible:!1}))},T=function(e){var t,a,n=Object(d.useState)(0),c=Object(N.a)(n,2),r=c[0],i=c[1];return Object(d.useEffect)((function(){var t,a=(null===(t=e.currentInfo)||void 0===t?void 0:t.duration)||e.musicPlayingInfo.duration||0;i(e.currentTime/a*100)}),[e.currentInfo,e.currentTime,e.musicPlayingInfo.duration]),b.a.createElement("section",{className:"player-control"},e.min?b.a.createElement("section",{className:"control-min"},b.a.createElement("p",{className:"icon-play-bg",onClick:function(){e.isPlaying?e.handlePause():e.handlePlay()}},e.isPlaying?b.a.createElement("svg",{className:"icon icon-pause","aria-hidden":"true"},b.a.createElement("use",{xlinkHref:"#icon-Pause"})):b.a.createElement("svg",{className:"icon icon-play","aria-hidden":"true"},b.a.createElement("use",{xlinkHref:"#icon-Play"}))),b.a.createElement("section",{className:"control-progress"},b.a.createElement(C,{range:Number(r.toFixed(2)),handleChanging:e.handleChanging,setChange:e.setChange})),b.a.createElement("section",{className:"line-left"},b.a.createElement("span",null," ",P(e.currentTime||0)," "),b.a.createElement("span",null,"/"),b.a.createElement("span",null," ",P((null===(t=e.currentInfo)||void 0===t?void 0:t.duration)||e.musicPlayingInfo.duration||0)," "))):b.a.createElement("section",{className:"control"},b.a.createElement("section",{className:"control-progress"},b.a.createElement(C,{range:Number(r.toFixed(2)),handleChanging:e.handleChanging,setChange:e.setChange})),b.a.createElement("section",{className:"control-line"},b.a.createElement("section",{className:"line-left"},b.a.createElement("span",null," ",P(e.currentTime||0)," "),b.a.createElement("span",null," ",P((null===(a=e.currentInfo)||void 0===a?void 0:a.duration)||e.musicPlayingInfo.duration||0)," ")),b.a.createElement("section",{className:"line-center"},b.a.createElement("p",{className:"icon-play-bg",onClick:function(){e.isPlaying?e.handlePause():e.handlePlay()}},e.isPlaying?b.a.createElement("svg",{className:"icon icon-pause","aria-hidden":"true"},b.a.createElement("use",{xlinkHref:"#icon-Pause"})):b.a.createElement("svg",{className:"icon icon-play","aria-hidden":"true"},b.a.createElement("use",{xlinkHref:"#icon-Play"})))))))},z=(a(219),function(e){var t=Object(d.useState)([]),a=Object(N.a)(t,2),n=a[0],c=a[1],r=Object(d.useState)(-1),i=Object(N.a)(r,2),s=i[0],l=i[1],u=Object(d.useRef)(null),o=Object(d.useState)(!0),m=Object(N.a)(o,2),f=m[0],p=m[1],g=Object(d.useState)({backgroundImage:""}),h=Object(N.a)(g,2),y=h[0],v=h[1],E=Object(d.useState)(0),j=Object(N.a)(E,2),O=j[0],w=j[1];Object(d.useEffect)((function(){c(function(e){var t=[];console.log("\u8fdb\u5165\u9010\u5b57\u89e3\u6790\u7684\u6b4c\u8bcd\u54e6");for(var a=e.split("\n"),n=0;n<a.length;){var c=a[n].replace(/\s/g,""),r=c.match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),i=c.match(/(?<=\])\S\s?(?=\[)/g);if(r&&i){for(var s=[],l=0;l<i.length;l++)s.push({text:i[l],start:L(r[l]),end:L(r[l+1])});t.push(s)}n++}return t}(e.lrc))}),[e.lrc]),Object(d.useEffect)((function(){if(l(function(e,t){if(e.length<=0)return-1;for(var a=0;a<e.length&&!(e[a][0].start>t);)a++;return a-1}(n,e.currentTime)),n[s]&&n[s].length){var t=n[s].map((function(e){return e.text}));e.setCurrentLrc(t.join(""))}var a=function(e,t){if(!e)return 0;for(var a=0,n=0;n<e.length&&!(e[n].start>t);)n++;if(n<=0)return 0;if(n>=e.length)return 100;a=n*(100/e.length);var c=e[n-1];if(t>=c.end)return 100;if(t<=c.start)return(n-1)*(100/e.length);var r=c.end-c.start;return a+=(t-c.start)/r*(100/e.length)}(n[s],e.currentTime);v({backgroundImage:"-webkit-linear-gradient(left,".concat(e.color," ").concat(a,"%,#ffffff ").concat(a,"%)")})}),[s,n,e,e.currentTime]),Object(d.useEffect)((function(){if(u&&f&&e.isPlaying){var t=u.current,a=O*(s-1)||0;t&&t.scrollTo({top:a,behavior:"smooth"})}}),[f,O,s,e.isPlaying]);var x=function(e){return s===e?"choose-lrc-line":""},k=function(){w(7.5*document.body.offsetHeight/100)};return Object(d.useEffect)((function(){return window.addEventListener("resize",k),k(),function(){window.removeEventListener("resize",k)}}),[]),b.a.createElement("section",{className:"music-lrc-word",ref:u,onMouseEnter:function(){p(!1)},onMouseLeave:function(){if(p(!0),e.isPlaying){var t=u.current,a=O*(s-1)||0;t&&t.scrollTo({top:a,behavior:"auto"})}}},b.a.createElement("section",{className:"lrc-list"},n.map((function(e,t){return b.a.createElement("section",{key:t,className:"lrc-line"},b.a.createElement("p",{className:x(t),style:s===t?y:{}},e.map((function(e,t){return b.a.createElement("span",{key:t},e.text)}))))}))))}),S=a(194),D=a(157),R=a(50),A=a.n(R),H=function(){var e=Object(O.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-lrc-list",e.next=3,A.a.getItem("music-lrc-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return a=e.t0,a.every((function(e){return e.fileName!==t.fileName}))&&a.push(t),e.abrupt("return",A.a.setItem("music-lrc-list",a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(O.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-lrc-list",e.next=3,A.a.getItem("music-lrc-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(O.a)(j.a.mark((function e(t,a){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-list",e.next=3,A.a.getItem("music-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:if(n=e.t0,!n.every((function(e){return e.fileName!==t.fileName}))){e.next=14;break}return c="".concat(t.fileName,"-").concat(100*Math.random(),"-").concat(Date.now()),t.id=c,e.next=13,A.a.setItem(c,a);case 13:n.push(t);case 14:return e.abrupt("return",A.a.setItem("music-list",n));case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-list",e.next=3,A.a.getItem("music-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(O.a)(j.a.mark((function e(a,n){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getItem("music-list");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(c=e.t0,r=c.filter((function(e){return e.id===t}))[0]){e.next=11;break}n("\u83b7\u53d6\u6b4c\u66f2\u4fe1\u606f\u5931\u8d25"),e.next=20;break;case 11:return e.next=13,A.a.getItem(t);case 13:if(r.music=e.sent,!r.lrcKey){e.next=19;break}return e.next=17,K();case 17:e.sent.forEach((function(e){e.fileName===r.lrcKey&&(r.lrc=e.content)}));case 19:a(r);case 20:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=a(137),J=a(98),V=a(158),Z=a(59),$=a(131),G=a(132),Q=a(43),W=(a(220),a(20)),X=a(195),Y=new(n=function(){function e(){var t=this;Object($.a)(this,e),Object(Z.a)(this,"musicPlayer",c,this),this.handlePlay=function(){var e,a,n;(console.log("\u6b4c\u66f2\u64ad\u653e\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),duration:null===(a=t.musicPlayer)||void 0===a?void 0:a.duration(),playing:!0,change:!1}),t.musicInfo&&!t.musicInfo.duration)&&(t.musicInfo.duration=Number(null===(n=t.musicPlayer)||void 0===n?void 0:n.duration()))},this.handlePause=function(){var e;console.log("\u6b4c\u66f2\u6682\u505c\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1})},this.handleEnd=function(){var e;console.log("\u6b4c\u66f2\u64ad\u653e\u5b8c\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1}),requestAnimationFrame(t.handlePlaying)},this.handleStop=function(){var e;console.log("\u6b4c\u66f2\u505c\u6b62"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1})},this.handlePlaying=function(){!t.musicData.change&&t.musicPlayer&&t.musicPlayer.playing()&&(t.updatedMusicData({type:"update",currentTime:t.musicPlayer.seek()}),requestAnimationFrame(t.handlePlaying))},Object(Z.a)(this,"musicInfo",r,this),Object(Z.a)(this,"musicData",i,this),Object(Z.a)(this,"localMusicList",s,this),Object(Z.a)(this,"localMusicLoading",l,this),Object(Z.a)(this,"updateLocalMusicList",u,this),this.localMusicLrcList=[],Object(Z.a)(this,"localMusicLrcLoading",o,this),Object(Z.a)(this,"updateLocalMusicLrcList",m,this),Object(Z.a)(this,"musicColor",f,this),Object(Z.a)(this,"updateMusicColor",p,this)}return Object(G.a)(e,[{key:"createdPlayer",value:function(){var e;this.musicInfo&&(this.updatedMusicData({playing:!1}),this.musicPlayer=new X.Howl({autoplay:!0,src:URL.createObjectURL(this.musicInfo.music),html5:!0,format:[(e=this.musicInfo.codec.toLowerCase()||String(this.musicInfo.fileType).toLowerCase(),"mpeg 1 layer 3"===e?"mp3":e)],volume:1,onplay:this.handlePlay,onpause:this.handlePause,onend:this.handleEnd,onstop:this.handleStop}))}},{key:"destroyPlayer",value:function(){this.musicPlayer=null}},{key:"updatedMusicInfo",value:function(e){0===e.picture.length&&(e.picture=["".concat(".","/images/music-no.jpeg")]),this.musicInfo=e}},{key:"updatedMusicData",value:function(e){var t=this;"update"!==e.type?(e.hasOwnProperty("min")&&(e.min?document.body.classList.remove("dialog-screen"):document.body.classList.add("dialog-screen")),e.change||setTimeout((function(){requestAnimationFrame(t.handlePlaying)}),100),this.musicData=Object(V.a)(Object(V.a)({},this.musicData),e)):this.musicData.currentTime=e.currentTime}}]),e}(),c=Object(Q.a)(n.prototype,"musicPlayer",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(Q.a)(n.prototype,"createdPlayer",[W.f],Object.getOwnPropertyDescriptor(n.prototype,"createdPlayer"),n.prototype),Object(Q.a)(n.prototype,"destroyPlayer",[W.f],Object.getOwnPropertyDescriptor(n.prototype,"destroyPlayer"),n.prototype),r=Object(Q.a)(n.prototype,"musicInfo",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(Q.a)(n.prototype,"updatedMusicInfo",[W.f],Object.getOwnPropertyDescriptor(n.prototype,"updatedMusicInfo"),n.prototype),i=Object(Q.a)(n.prototype,"musicData",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:"",playing:!1,duration:0,currentTime:0,change:!1,min:!0}}}),Object(Q.a)(n.prototype,"updatedMusicData",[W.f],Object.getOwnPropertyDescriptor(n.prototype,"updatedMusicData"),n.prototype),s=Object(Q.a)(n.prototype,"localMusicList",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(Q.a)(n.prototype,"localMusicLoading",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(Q.a)(n.prototype,"updateLocalMusicList",[W.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.localMusicLoading=!0,t.next=3,U();case 3:e.localMusicList=t.sent,e.localMusicLoading=!1;case 5:case"end":return t.stop()}}),t)})))}}),o=Object(Q.a)(n.prototype,"localMusicLrcLoading",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(Q.a)(n.prototype,"updateLocalMusicLrcList",[W.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.localMusicLrcLoading=!0,t.next=3,K();case 3:e.localMusicLrcList=t.sent,e.localMusicLrcLoading=!1;case 5:case"end":return t.stop()}}),t)})))}}),f=Object(Q.a)(n.prototype,"musicColor",[W.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#1890ff"}}),p=Object(Q.a)(n.prototype,"updateMusicColor",[W.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.musicColor=t,document.documentElement.style.setProperty("--primary-color",t)}}}),n),_=new S.a,ee=Object(J.a)((function(){var e,t=Y.musicPlayer,a=Y.musicInfo,n=Y.musicData,c=Object(d.useState)(""),r=Object(N.a)(c,2),i=r[0],s=r[1],l=Object(d.useRef)(!1),u=Y.musicColor,o=function(e){var t=((null===a||void 0===a?void 0:a.duration)||0)*e/100;Y.updatedMusicData({currentTime:t})},m=function(e){e||(null===t||void 0===t||t.seek(n.currentTime),n.playing||null===t||void 0===t||t.play()),Y.updatedMusicData({change:e})},f=Object(d.useCallback)(Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(O.a)(j.a.mark((function e(t,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(n.id);case 2:(c=e.sent)?t(c):a("\u6b4c\u66f2\u64ad\u653e\u83b7\u53d6\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),[n.id]),p=Object(d.useCallback)((function(){t&&(t.playing()?t.pause():t.play())}),[t]),g=Object(d.useCallback)(Object(O.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:Y.updatedMusicInfo(t),_.getColorAsync(t.picture[0]).then((function(e){Y.updateMusicColor(Object(D.b)(.8,Object(D.a)(.5,e.rgba)))})).catch((function(e){Y.updateMusicColor("#1890ff")}));case 9:case"end":return e.stop()}}),e)}))),[f,n.id]),h=Object(d.useCallback)((function(e){e.preventDefault(),32===e.keyCode&&p()}),[p]),y=function(){Y.updatedMusicData({min:!n.min})};return Object(d.useEffect)((function(){console.log("useEffect-getMusicInfo"),g()}),[g]),Object(d.useEffect)((function(){return console.log("useEffect-create"),a&&!t&&(s(""),console.log("\u521b\u5efa\u97f3\u4e50\u5b9e\u4f8b"),Y.createdPlayer()),function(){t&&(console.log("created destroy"),Y.updatedMusicData({playing:!1}),Y.destroyPlayer())}}),[a,t]),Object(d.useEffect)((function(){console.log("music-change-key"),l.current=n.change}),[n.change]),Object(d.useEffect)((function(){return window.addEventListener("keydown",h),function(){window.removeEventListener("keydown",h)}}),[h]),b.a.createElement("section",{className:"player"},n.min?b.a.createElement("section",{className:"player-min"},a?b.a.createElement("section",{className:"player-layout"},b.a.createElement("section",{className:"layout-left"},b.a.createElement("section",{className:"music-img",onClick:y},b.a.createElement("img",{src:a.picture.length>0?a.picture[0]:"./images/music-no.jpeg",alt:""})),b.a.createElement("section",{className:"player-info"},b.a.createElement("p",{className:"music-name"},a.name),b.a.createElement("p",{className:"music-artist"},a.artist," - ",a.album))),b.a.createElement("section",{className:"music-progress"},b.a.createElement(T,{handlePlay:p,handlePause:p,currentInfo:a||null,musicPlayingInfo:n,currentTime:n.currentTime,handleChanging:o,setChange:m,min:n.min,isPlaying:n.playing}))):b.a.createElement("section",{className:"player-layout"},"\u8bf7\u9009\u62e9\u6b4c\u66f2\u8fdb\u884c\u64ad\u653e")):b.a.createElement("section",{className:"player-max"},b.a.createElement("section",{className:"status-control",onClick:y},b.a.createElement(q.a,null)),b.a.createElement("section",{className:"player-bg",style:{backgroundImage:"url(".concat((null===a||void 0===a?void 0:a.picture[0])||"./images/music-no.jpeg",")")}}),b.a.createElement("section",{className:"player-fade"}),b.a.createElement("section",{className:"player-layout"},a?b.a.createElement("section",{className:"player-box"},b.a.createElement("section",{className:"player-left"},b.a.createElement("section",{className:"player-line"},b.a.createElement("img",{src:a.picture.length>0?a.picture[0]:"./images/music-no.jpeg",alt:""})),b.a.createElement("section",{className:"player-line"},b.a.createElement("section",{className:"player-info"},b.a.createElement("p",{className:"music-name"},a.name),b.a.createElement("p",{className:"music-artist"},a.artist," - ",a.album),b.a.createElement("p",{className:"music-current-lrc"},i))),b.a.createElement(T,{handlePlay:p,handlePause:p,currentInfo:a||null,musicPlayingInfo:n,currentTime:n.currentTime,handleChanging:o,setChange:m,isPlaying:n.playing})),b.a.createElement("section",{className:"player-right"},(null===(e=a.lrc)||void 0===e?void 0:e.match(/\](\S)\[/g))?b.a.createElement(z,{setCurrentLrc:s,color:u,lrc:a.lrc||"",currentInfo:a||null,currentTime:n.currentTime,isPlaying:n.playing}):b.a.createElement(M,{setCurrentLrc:s,color:u,lrc:a.lrc||"",currentInfo:a||null,currentTime:n.currentTime,isPlaying:n.playing}))):"")))})),te=a(197),ae=a(207),ne=a(401),ce=a(64),re=a(405),ie=(a(313),["mp3","ogg","wav","aac","flac","dolby","opus","webm","alac"]),se=["lrc","txt"],le=a(153),ue=a.n(le),oe=function(){var e=function(){var e=Object(O.a)(j.a.mark((function e(t){var a,n,c,r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.split("."),n=a[a.length-1],c=t.name.replace(".".concat(n),""),e.prev=3,e.next=6,x(t,!0);case 6:return r=e.sent,e.next=9,te.parseBlob(r);case 9:i=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),ae.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(n,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(c)),e.abrupt("return");case 16:l=i,(s={name:Object(w.get)(l,"common.title",""),album:Object(w.get)(l,"common.album",""),albumartist:Object(w.get)(l,"common.albumartist",""),artist:Object(w.get)(l,"common.artist",""),artists:Object(w.get)(l,"common.artists",[]),comment:Object(w.get)(l,"common.comment",[]),date:Object(w.get)(l,"common.date",0),picture:Object(w.get)(l,"common.picture",[]).map((function(e){return"data:".concat(e.format,";base64,").concat(k(e.data))})),codec:Object(w.get)(l,"format.codec",""),duration:Object(w.get)(l,"format.duration",0),sampleRate:Object(w.get)(l,"format.sampleRate",""),lrc:""}).fileName=c,s.fileType=n,s.fileSize=ue()(t.size),s.size=t.size,s.name=s.name||s.fileName||"\u672a\u77e5\u6b4c\u66f2",F(s,r).then((function(e){console.log(e),ae.b.success("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f")),Y.updateLocalMusicList()}));case 23:case"end":return e.stop()}var l}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(O.a)(j.a.mark((function e(t){var a,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.split("."),n=a[a.length-1],c=t.name.replace(".".concat(n),""),r="",e.prev=4,e.next=7,x(t,!1);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),ae.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(n,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(c)),e.abrupt("return");case 14:H({content:r,fileName:c,fileType:n,size:t.size,fileSize:ue()(t.size)}).then((function(e){console.log(e),ae.b.success("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f"))}));case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return b.a.createElement("section",{className:"page-upload"},b.a.createElement("section",{className:"upload-line"},b.a.createElement(ne.a,{beforeUpload:function(a){var n=a.name.split("."),c=n[n.length-1],r=a.name.replace(".".concat(c),"");return ie.includes(c)?(console.log("\u5f53\u524d\u662f\u97f3\u9891\u6587\u4ef6\u5904\u7406",r,c),e(a),!1):se.includes(c)?(console.log("\u5f53\u524d\u662f\u6b4c\u8bcd\u6587\u4ef6\u5904\u7406",r,c),t(a),!1):(ae.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(c,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(r)),!1)},showUploadList:!1,accept:function(){var e=ie.concat(se);return(e=e.map((function(e){return e=".".concat(e)}))).join(",")}(),multiple:!0},b.a.createElement(ce.a,{icon:b.a.createElement(re.a,null)},"\u70b9\u51fb\u4e0a\u4f20\u672c\u5730\u6b4c\u66f2\u6216\u8005\u6b4c\u8bcd")),b.a.createElement("p",{className:"tips"},b.a.createElement("span",null,"\u652f\u6301\u6b4c\u66f2\u683c\u5f0f ",ie.join("\uff0c")),b.a.createElement("span",null,"\u652f\u6301\u6b4c\u8bcd\u683c\u5f0f ",se.join("\uff0c")))))},me=a(402),fe=a(400),pe=Object(J.a)((function(){var e=Y.localMusicLrcList,t=Y.localMusicLrcLoading;return Object(d.useEffect)((function(){console.log("\u83b7\u53d6\u6b4c\u8bcd\u5217\u8868"),Y.updateLocalMusicLrcList()}),[]),b.a.createElement("section",{className:"lrc-list"},b.a.createElement(fe.a,{dataSource:e,columns:[{title:"\u6b4c\u8bcd\u540d",dataIndex:"fileName",key:"fileName"},{title:"\u5927\u5c0f",dataIndex:"fileSize",key:"fileSize",sorter:function(e,t){return e.size-t.size}}],pagination:!1,rowKey:"fileName",loading:t}))})),de=a(404),be=a(406),ge=a(407),he=(a(384),a(385),function(){return b.a.createElement("p",{className:"playing-icon"},b.a.createElement("span",{className:"rect1"}),b.a.createElement("span",{className:"rect2"}),b.a.createElement("span",{className:"rect3"}),b.a.createElement("span",{className:"rect4"}),b.a.createElement("span",{className:"rect5"}))}),ye=Object(J.a)((function(){var e=Y.musicData,t=Y.localMusicList,a=Y.localMusicLoading,n=[{title:"\u6b4c\u66f2",dataIndex:"name",key:"name",width:300,render:function(t,a){return b.a.createElement("section",{className:"list-play"},(null===e||void 0===e?void 0:e.id)===a.id&&e.playing?b.a.createElement("span",null,b.a.createElement(be.a,{className:"icon",onClick:function(){return r()}})):b.a.createElement("span",null,b.a.createElement(ge.a,{className:"icon",onClick:function(){return c(a)}})),b.a.createElement("span",null,t),(null===e||void 0===e?void 0:e.id)===a.id&&e.playing?b.a.createElement(he,null):"")}},{title:"\u6b4c\u624b",dataIndex:"artist",key:"artist"},{title:"\u4e13\u8f91",dataIndex:"album",key:"album"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",render:function(e){return P(e)||"\u672a\u77e5"},sorter:function(e,t){return Number(e.duration)-Number(t.duration)}},{title:"\u683c\u5f0f",dataIndex:"codec",key:"codec",render:function(e,t){return e||t.fileType}},{title:"\u5927\u5c0f",dataIndex:"fileSize",key:"fileSize",sorter:function(e,t){return Number(e.size)-Number(t.size)}},{title:"\u5173\u8054\u6b4c\u8bcd\u540d",dataIndex:"lrcKey",key:"lrcKey",render:function(e,t){return e||b.a.createElement(de.b,{size:"middle"},b.a.createElement("span",{className:"action"},"\u5173\u8054\u6b4c\u8bcd"))}}],c=function(t){var a;t.id!==e.id?(null===(a=Y.musicPlayer)||void 0===a||a.stop(),setTimeout((function(){Y.updatedMusicData({id:t.id})}),100)):Y.musicPlayer&&Y.musicPlayer.play()},r=function(){var e;null===(e=Y.musicPlayer)||void 0===e||e.pause()};return Object(d.useEffect)((function(){console.log("\u83b7\u53d6\u97f3\u4e50\u5217\u8868"),Y.updateLocalMusicList()}),[]),b.a.createElement("section",{className:"lrc-list"},b.a.createElement(fe.a,{dataSource:t,columns:n,pagination:!1,rowKey:"fileName",loading:a}))})),ve=me.a.TabPane,Ee=function(){var e=Object(v.f)(),t=new URLSearchParams(Object(v.g)().search),a=Object(v.g)(),n=Object(d.useState)(""),c=Object(N.a)(n,2),r=c[0],i=c[1],s=function(){var e=Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(O.a)(j.a.mark((function e(t,a){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:return n=e.sent,e.next=6,K();case 6:return c=e.sent,n=n.map((function(e){return c.forEach((function(t){t.fileName.includes(e.name)&&(e.lrcKey=t.fileName)})),e})),e.next=10,A.a.setItem("music-list",n);case 10:t("success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}());case 2:ae.b.success("\u5173\u8054\u6210\u529f"),Y.updateLocalMusicList(),Y.updateLocalMusicLrcList();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){if(t){var e=t.get("type")||"";["music","lrc"].includes(e)?i(e):i("music")}}),[t]),b.a.createElement("section",{className:"page-local"},b.a.createElement("section",{className:"local-upload"},b.a.createElement(oe,null),b.a.createElement("section",null,b.a.createElement(ce.a,{onClick:s},"\u81ea\u52a8\u5173\u8054\u6b4c\u8bcd"),b.a.createElement("p",{className:"tips"},"\u5173\u8054\u89c4\u5219: \u5f53\u524d\u6b4c\u66f2\u6ca1\u6709\u6b4c\u8bcd\uff0c\u540c\u65f6\u53ef\u4ee5\u627e\u5230\u6b4c\u8bcd\u540d\uff0c\u5305\u542b\u5b8c\u6574\u6b4c\u66f2\u540d"))),b.a.createElement("section",{className:"local-content"},b.a.createElement(me.a,{activeKey:r,onChange:function(t){e.push("".concat(a.pathname,"?type=").concat(t))}},b.a.createElement(ve,{tab:"\u97f3\u4e50\u5217\u8868",key:"music"},b.a.createElement(ye,null)),b.a.createElement(ve,{tab:"\u6b4c\u8bcd\u5217\u8868",key:"lrc"},b.a.createElement(pe,null)))))},je=function(){return b.a.createElement("p",null,"Love")},Oe=(a(389),function(){return b.a.createElement("section",{className:"page-home"},b.a.createElement("section",{className:"wrapper-box"},b.a.createElement("section",{className:"nav"},b.a.createElement("p",{className:"nav-item"},b.a.createElement(y.b,{to:"/",exact:!0},"\u63a8\u8350")),b.a.createElement("p",{className:"nav-item"},b.a.createElement(y.b,{to:"/local"},"\u672c\u5730\u97f3\u4e50"))),b.a.createElement("section",{className:"music-box"},b.a.createElement(v.c,null,b.a.createElement(v.a,{path:"/local",exact:!0},b.a.createElement(Ee,null)),b.a.createElement(v.a,{path:"/",exact:!0},b.a.createElement(je,null))))),b.a.createElement(ee,null))});a(390);var Ne=function(){return b.a.createElement("section",{className:"hzfe-music"},b.a.createElement(y.a,null,b.a.createElement(v.c,null,b.a.createElement(v.a,{path:"/",exact:!0},b.a.createElement(Oe,null)),b.a.createElement(v.a,{path:"*",exact:!0},b.a.createElement(Oe,null)))))},we=a(28),xe=a(204),ke=a.n(xe);a(391),a(392);A.a.config({name:"HZFE-MUSIC"}),h.a.render(b.a.createElement(we.a,{locale:ke.a},b.a.createElement(Ne,null)),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.a3997884.chunk.js.map