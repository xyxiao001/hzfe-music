(this["webpackJsonphzfe-music"]=this["webpackJsonphzfe-music"]||[]).push([[0],{209:function(e,t,n){e.exports=n(397)},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},220:function(e,t,n){},304:function(e,t){},306:function(e,t){},314:function(e,t,n){},385:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a,c,r,i,s=n(0),l=n.n(s),u=n(30),o=n.n(u),m=(n(214),n(96)),f=n(34),p=n(8),d=n.n(p),b=n(36),g=n(31),y=(n(215),n(53)),h=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],t){e.next=3;break}return e.abrupt("return","");case 3:return e.abrupt("return",new Promise((function(e,a){var c=new FileReader;c.onload=function(t){var a=t.target;e(n?a.result?new Blob([a.result]):null:a.result)},c.onerror=a,n?c.readAsArrayBuffer(t):c.readAsText(t)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){for(var t,n=0,a=e.length,c="";n<a;)t=e.subarray(n,Math.min(n+32768,a)),c+=String.fromCharCode.apply(null,t),n+=32768;return btoa(c)},E=function(e){var t=Math.floor(e/60)||0,n=~~(e-60*t)||0;return(t<10?"0":"")+t+":"+(n<10?"0":"")+n},j=function(e){var t,n=(null===(t=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(e))||void 0===t?void 0:t.map((function(e){return e?Number(e):0})))||[];return 60*n[1]+n[2]+(n[4]?n[4]/(2===(n[4]+"").length?100:1e3):0)},O=(n(216),function(e){var t=Object(s.useState)([]),n=Object(g.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(-1),i=Object(g.a)(r,2),u=i[0],o=i[1],m=Object(s.useRef)(null),f=Object(s.useState)(!0),p=Object(g.a)(f,2),d=p[0],b=p[1],y=Object(s.useState)(0),h=Object(g.a)(y,2),v=h[0],E=h[1];Object(s.useEffect)((function(){c(function(e){var t=e;if(t){for(var n=(t=t.replace(/([^\]^\n])\[/g,(function(e,t){return t+"\n["}))).split("\n"),a=[],c=n.length,r=0;r<c;r++){var i=n[r].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),s=n[r].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(i)for(var l=i.length,u=0;u<l;u++){var o=j(i[u]);a.push({time:o,text:s})}}return(a=a.filter((function(e){return e.text}))).sort((function(e,t){return e.time-t.time})),a}return[]}(e.lrc))}),[e.lrc]),Object(s.useEffect)((function(){o(function(e,t){if(e.length<=0)return-1;for(var n=0;n<e.length&&!(e[n].time>t);)n++;return n-1}(a,e.currentTime)),a.length&&a[u]&&e.setCurrentLrc(a[u].text)}),[u,a,e,e.currentTime]),Object(s.useEffect)((function(){if(m&&d&&e.isPlaying){var t=m.current,n=v*(u-1)||0;t&&t.scrollTo({top:n,behavior:"smooth"})}}),[d,v,u,e.isPlaying]);var O=function(e){return u===e?"choose-lrc":""},N=function(){E(7.5*document.body.offsetHeight/100)};return Object(s.useEffect)((function(){return window.addEventListener("resize",N),N(),function(){window.removeEventListener("resize",N)}}),[]),l.a.createElement("section",{className:"music-lrc",ref:m,onMouseEnter:function(){b(!1)},onMouseLeave:function(){if(e.isPlaying){var t=m.current,n=v*(u-1)||0;t&&t.scrollTo({top:n,behavior:"auto"}),b(!0)}else b(!0)}},l.a.createElement("section",{className:"lrc-list"},a.map((function(t,n){return l.a.createElement("p",{key:"".concat(t.time).concat(u).concat(t.text),style:{color:u===n?e.color:""},className:O(n)},t.text)}))))}),N=(n(217),n(218),n(402)),x=function(e){var t=Object(s.useState)(0),n=Object(g.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(!1),i=Object(g.a)(r,2),u=i[0],o=i[1];Object(s.useEffect)((function(){u||c(e.range)}),[u,e.range]);return l.a.createElement("section",{className:"progress"},l.a.createElement(N.a,{defaultValue:0,value:a,onChange:function(t){o(!0),e.setChange(!0),c(t),e.handleChanging(t)},onAfterChange:function(t){e.setChange(!1),o(!1)},tooltipVisible:!1}))},k=function(e){var t,n,a=Object(s.useState)(0),c=Object(g.a)(a,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){var t,n=(null===(t=e.currentInfo)||void 0===t?void 0:t.duration)||e.musicPlayingInfo.duration||0;i(e.currentTime/n*100)}),[e.currentInfo,e.currentTime,e.musicPlayingInfo.duration]),l.a.createElement("section",{className:"player-control"},e.min?l.a.createElement("section",{className:"control-min"},l.a.createElement("p",{className:"icon-play-bg",onClick:function(){e.isPlaying?e.handlePause():e.handlePlay()}},e.isPlaying?l.a.createElement("svg",{className:"icon icon-pause","aria-hidden":"true"},l.a.createElement("use",{xlinkHref:"#icon-Pause"})):l.a.createElement("svg",{className:"icon icon-play","aria-hidden":"true"},l.a.createElement("use",{xlinkHref:"#icon-Play"}))),l.a.createElement("section",{className:"control-progress"},l.a.createElement(x,{range:Number(r.toFixed(2)),handleChanging:e.handleChanging,setChange:e.setChange})),l.a.createElement("section",{className:"line-left"},l.a.createElement("span",null," ",E(e.currentTime||0)," "),l.a.createElement("span",null,"/"),l.a.createElement("span",null," ",E((null===(t=e.currentInfo)||void 0===t?void 0:t.duration)||e.musicPlayingInfo.duration||0)," "))):l.a.createElement("section",{className:"control"},l.a.createElement("section",{className:"control-progress"},l.a.createElement(x,{range:Number(r.toFixed(2)),handleChanging:e.handleChanging,setChange:e.setChange})),l.a.createElement("section",{className:"control-line"},l.a.createElement("section",{className:"line-left"},l.a.createElement("span",null," ",E(e.currentTime||0)," "),l.a.createElement("span",null," ",E((null===(n=e.currentInfo)||void 0===n?void 0:n.duration)||e.musicPlayingInfo.duration||0)," ")),l.a.createElement("section",{className:"line-center"},l.a.createElement("p",{className:"icon-play-bg",onClick:function(){e.isPlaying?e.handlePause():e.handlePlay()}},e.isPlaying?l.a.createElement("svg",{className:"icon icon-pause","aria-hidden":"true"},l.a.createElement("use",{xlinkHref:"#icon-Pause"})):l.a.createElement("svg",{className:"icon icon-play","aria-hidden":"true"},l.a.createElement("use",{xlinkHref:"#icon-Play"})))))))},w=(n(220),function(e){var t=Object(s.useState)([]),n=Object(g.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(-1),i=Object(g.a)(r,2),u=i[0],o=i[1],m=Object(s.useRef)(null),f=Object(s.useState)(!0),p=Object(g.a)(f,2),d=p[0],b=p[1],y=Object(s.useState)({backgroundImage:""}),h=Object(g.a)(y,2),v=h[0],E=h[1],O=Object(s.useState)(0),N=Object(g.a)(O,2),x=N[0],k=N[1];Object(s.useEffect)((function(){c(function(e){var t=[];console.log("\u8fdb\u5165\u9010\u5b57\u89e3\u6790\u7684\u6b4c\u8bcd\u54e6");for(var n=e.split("\n"),a=0;a<n.length;){var c=n[a].replace(/\s/g,""),r=c.match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),i=c.match(/(?<=\])\S\s?(?=\[)/g);if(r&&i){for(var s=[],l=0;l<i.length;l++)s.push({text:i[l],start:j(r[l]),end:j(r[l+1])});t.push(s)}a++}return t}(e.lrc))}),[e.lrc]),Object(s.useEffect)((function(){if(o(function(e,t){if(e.length<=0)return-1;for(var n=0;n<e.length&&!(e[n][0].start>t);)n++;return n-1}(a,e.currentTime)),a[u]&&a[u].length){var t=a[u].map((function(e){return e.text}));e.setCurrentLrc(t.join(""))}var n=function(e,t){if(!e)return 0;for(var n=0,a=0;a<e.length&&!(e[a].start>t);)a++;if(a<=0)return 0;if(a>=e.length)return 100;n=a*(100/e.length);var c=e[a-1];if(t>=c.end)return 100;if(t<=c.start)return(a-1)*(100/e.length);var r=c.end-c.start;return n+=(t-c.start)/r*(100/e.length)}(a[u],e.currentTime);E({backgroundImage:"-webkit-linear-gradient(left,".concat(e.color," ").concat(n,"%,#ffffff ").concat(n,"%)")})}),[u,a,e,e.currentTime]),Object(s.useEffect)((function(){if(m&&d&&e.isPlaying){var t=m.current,n=x*(u-1)||0;t&&t.scrollTo({top:n,behavior:"smooth"})}}),[d,x,u,e.isPlaying]);var w=function(e){return u===e?"choose-lrc-line":""},P=function(){k(7.5*document.body.offsetHeight/100)};return Object(s.useEffect)((function(){return window.addEventListener("resize",P),P(),function(){window.removeEventListener("resize",P)}}),[]),l.a.createElement("section",{className:"music-lrc-word",ref:m,onMouseEnter:function(){b(!1)},onMouseLeave:function(){if(b(!0),e.isPlaying){var t=m.current,n=x*(u-1)||0;t&&t.scrollTo({top:n,behavior:"auto"})}}},l.a.createElement("section",{className:"lrc-list"},a.map((function(e,t){return l.a.createElement("section",{key:t,className:"lrc-line"},l.a.createElement("p",{className:w(t),style:u===t?v:{}},e.map((function(e,t){return l.a.createElement("span",{key:t},e.text)}))))}))))}),P=n(194),I=n(157),C=n(49),T=n.n(C),S=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-lrc-list",e.next=3,T.a.getItem("music-lrc-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return n=e.t0,n.every((function(e){return e.fileName!==t.fileName}))&&n.push(t),e.abrupt("return",T.a.setItem("music-lrc-list",n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-lrc-list",e.next=3,T.a.getItem("music-lrc-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-list",e.next=3,T.a.getItem("music-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:if(a=e.t0,!a.every((function(e){return e.fileName!==t.fileName}))){e.next=14;break}return c="".concat(t.fileName,"-").concat(100*Math.random(),"-").concat(Date.now()),t.id=c,e.next=13,T.a.setItem(c,n);case 13:a.push(t);case 14:return e.abrupt("return",T.a.setItem("music-list",a));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"music-list",e.next=3,T.a.getItem("music-list");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(b.a)(d.a.mark((function e(n,a){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.getItem("music-list");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(c=e.t0,r=c.filter((function(e){return e.id===t}))[0]){e.next=11;break}a("\u83b7\u53d6\u6b4c\u66f2\u4fe1\u606f\u5931\u8d25"),e.next=20;break;case 11:return e.next=13,T.a.getItem(t);case 13:if(r.music=e.sent,!r.lrcKey){e.next=19;break}return e.next=17,D();case 17:e.sent.forEach((function(e){e.fileName===r.lrcKey&&(r.lrc=e.content)}));case 19:n(r);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=n(136),A=n(133),H=n(158),K=n(141),F=n(129),U=n(130),B=n(78),q=(n(221),n(20)),J=n(195),V=new(a=function(){function e(){var t=this;Object(F.a)(this,e),Object(K.a)(this,"musicPlayer",c,this),this.handlePlay=function(){var e,n;console.log("\u6b4c\u66f2\u64ad\u653e\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),duration:null===(n=t.musicPlayer)||void 0===n?void 0:n.duration(),playing:!0,change:!1})},this.handlePause=function(){var e;console.log("\u6b4c\u66f2\u6682\u505c\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1})},this.handleEnd=function(){var e;console.log("\u6b4c\u66f2\u64ad\u653e\u5b8c\u4e86"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1}),requestAnimationFrame(t.handlePlaying)},this.handleStop=function(){var e;console.log("\u6b4c\u66f2\u505c\u6b62"),t.updatedMusicData({currentTime:null===(e=t.musicPlayer)||void 0===e?void 0:e.seek(),playing:!1})},this.handlePlaying=function(){!t.musicData.change&&t.musicPlayer&&t.musicPlayer.playing()&&(t.updatedMusicData({type:"update",currentTime:t.musicPlayer.seek()}),requestAnimationFrame(t.handlePlaying))},Object(K.a)(this,"musicInfo",r,this),Object(K.a)(this,"musicData",i,this)}return Object(U.a)(e,[{key:"createdPlayer",value:function(){this.musicInfo&&(this.updatedMusicData({playing:!1}),this.musicPlayer=new J.Howl({autoplay:!0,src:URL.createObjectURL(this.musicInfo.music),html5:!0,format:[this.musicInfo.codec.toLowerCase()],volume:1,onplay:this.handlePlay,onpause:this.handlePause,onend:this.handleEnd,onstop:this.handleStop}))}},{key:"destroyPlayer",value:function(){this.musicPlayer=null}},{key:"updatedMusicInfo",value:function(e){0===e.picture.length&&(e.picture=["".concat("","/images/music-no.jpeg")]),this.musicInfo=e}},{key:"updatedMusicData",value:function(e){var t=this;"update"!==e.type?(e.hasOwnProperty("min")&&(e.min?document.body.classList.remove("dialog-screen"):document.body.classList.add("dialog-screen")),e.change||setTimeout((function(){requestAnimationFrame(t.handlePlaying)}),100),this.musicData=Object(H.a)(Object(H.a)({},this.musicData),e)):this.musicData.currentTime=e.currentTime}}]),e}(),c=Object(B.a)(a.prototype,"musicPlayer",[q.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(B.a)(a.prototype,"createdPlayer",[q.f],Object.getOwnPropertyDescriptor(a.prototype,"createdPlayer"),a.prototype),Object(B.a)(a.prototype,"destroyPlayer",[q.f],Object.getOwnPropertyDescriptor(a.prototype,"destroyPlayer"),a.prototype),r=Object(B.a)(a.prototype,"musicInfo",[q.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(B.a)(a.prototype,"updatedMusicInfo",[q.f],Object.getOwnPropertyDescriptor(a.prototype,"updatedMusicInfo"),a.prototype),i=Object(B.a)(a.prototype,"musicData",[q.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:"",playing:!1,duration:0,currentTime:0,change:!1,min:!0}}}),Object(B.a)(a.prototype,"updatedMusicData",[q.f],Object.getOwnPropertyDescriptor(a.prototype,"updatedMusicData"),a.prototype),a),Z=new P.a,$=Object(A.a)((function(){var e,t=V.musicPlayer,n=V.musicInfo,a=V.musicData,c=Object(s.useState)("#52c41a"),r=Object(g.a)(c,2),i=r[0],u=r[1],o=Object(s.useState)(""),m=Object(g.a)(o,2),f=m[0],p=m[1],y=Object(s.useRef)(!1),h=function(e){var t=((null===n||void 0===n?void 0:n.duration)||0)*e/100;V.updatedMusicData({currentTime:t})},v=function(e){e||(null===t||void 0===t||t.seek(a.currentTime),a.playing||null===t||void 0===t||t.play()),V.updatedMusicData({change:e})},E=Object(s.useCallback)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(a.id);case 2:(c=e.sent)?t(c):n("\u6b4c\u66f2\u64ad\u653e\u83b7\u53d6\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),[a.id]),j=Object(s.useCallback)((function(){t&&(t.playing()?t.pause():t.play())}),[t]),N=Object(s.useCallback)(Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:V.updatedMusicInfo(t),Z.getColorAsync(t.picture[0]).then((function(e){u(Object(I.b)(.8,Object(I.a)(.5,e.rgba)))})).catch((function(e){u("#52c41a")}));case 7:case"end":return e.stop()}}),e)}))),[E]),x=Object(s.useCallback)((function(e){e.preventDefault(),32===e.keyCode&&j()}),[j]),P=function(){V.updatedMusicData({min:!a.min})};return Object(s.useEffect)((function(){console.log("useEffect-getMusicInfo"),N()}),[N]),Object(s.useEffect)((function(){return console.log("useEffect-create"),n&&!t&&(console.log("\u521b\u5efa\u97f3\u4e50\u5b9e\u4f8b"),V.createdPlayer()),function(){t&&(console.log("created destroy"),V.updatedMusicData({playing:!1}),V.destroyPlayer())}}),[n,t]),Object(s.useEffect)((function(){console.log("music-change-key"),y.current=a.change}),[a.change]),Object(s.useEffect)((function(){return window.addEventListener("keydown",x),function(){window.removeEventListener("keydown",x)}}),[x]),l.a.createElement("section",{className:"player"},a.min?l.a.createElement("section",{className:"player-min",style:{color:i}},n?l.a.createElement("section",{className:"player-layout"},l.a.createElement("section",{className:"layout-left"},l.a.createElement("section",{className:"music-img",onClick:P},l.a.createElement("img",{src:n.picture.length>0?n.picture[0]:"/images/music-no.jpeg",alt:""})),l.a.createElement("section",{className:"player-info"},l.a.createElement("p",{className:"music-name"},n.name),l.a.createElement("p",{className:"music-artist"},n.artist," - ",n.album))),l.a.createElement("section",{className:"music-progress"},l.a.createElement(k,{handlePlay:j,handlePause:j,currentInfo:n||null,musicPlayingInfo:a,currentTime:a.currentTime,handleChanging:h,setChange:v,min:a.min,isPlaying:a.playing}))):l.a.createElement("section",{className:"player-layout"},"\u8bf7\u9009\u62e9\u6b4c\u66f2\u8fdb\u884c\u64ad\u653e")):l.a.createElement("section",{className:"player-max"},l.a.createElement("section",{className:"status-control",onClick:P},l.a.createElement(R.a,null)),l.a.createElement("section",{className:"player-bg",style:{backgroundImage:"url(".concat((null===n||void 0===n?void 0:n.picture[0])||"/images/music-no.jpeg",")")}}),l.a.createElement("section",{className:"player-fade"}),l.a.createElement("section",{className:"player-layout"},n?l.a.createElement("section",{className:"player-box"},l.a.createElement("section",{className:"player-left"},l.a.createElement("section",{className:"player-line"},l.a.createElement("img",{src:n.picture.length>0?n.picture[0]:"/images/music-no.jpeg",alt:""})),l.a.createElement("section",{className:"player-line"},l.a.createElement("section",{className:"player-info"},l.a.createElement("p",{className:"music-name"},n.name),l.a.createElement("p",{className:"music-artist"},n.artist," - ",n.album),l.a.createElement("p",{className:"music-current-lrc"},f))),l.a.createElement(k,{handlePlay:j,handlePause:j,currentInfo:n||null,musicPlayingInfo:a,currentTime:a.currentTime,handleChanging:h,setChange:v,isPlaying:a.playing})),l.a.createElement("section",{className:"player-right"},(null===(e=n.lrc)||void 0===e?void 0:e.match(/\](\S)\[/g))?l.a.createElement(w,{setCurrentLrc:p,color:i,lrc:n.lrc||"",currentInfo:n||null,currentTime:a.currentTime,isPlaying:a.playing}):l.a.createElement(O,{setCurrentLrc:p,color:i,lrc:n.lrc||"",currentInfo:n||null,currentTime:a.currentTime,isPlaying:a.playing}))):"")))})),G=n(197),Q=n(207),W=n(400),X=n(62),Y=n(404),_=(n(314),["mp3","ogg","wav","aac","flac","dolby","opus","webm","alac"]),ee=["lrc","txt"],te=n(153),ne=n.n(te),ae=function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,c,r,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name.split("."),a=n[n.length-1],c=t.name.replace(".".concat(a),""),e.prev=3,e.next=6,h(t,!0);case 6:return r=e.sent,e.next=9,G.parseBlob(r);case 9:i=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),Q.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(a,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(c)),e.abrupt("return");case 16:l=i,(s={name:Object(y.get)(l,"common.title",""),album:Object(y.get)(l,"common.album",""),albumartist:Object(y.get)(l,"common.albumartist",""),artist:Object(y.get)(l,"common.artist",""),artists:Object(y.get)(l,"common.artists",[]),comment:Object(y.get)(l,"common.comment",[]),date:Object(y.get)(l,"common.date",0),picture:Object(y.get)(l,"common.picture",[]).map((function(e){return"data:".concat(e.format,";base64,").concat(v(e.data))})),codec:Object(y.get)(l,"format.codec",""),duration:Object(y.get)(l,"format.duration",0),sampleRate:Object(y.get)(l,"format.sampleRate",""),lrc:""}).fileName=c,s.fileType=a,s.fileSize=ne()(t.size),s.size=t.size,s.name=s.name||s.fileName||"\u672a\u77e5\u6b4c\u66f2",z(s,r).then((function(e){console.log(e),Q.b.success("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f"))}));case 23:case"end":return e.stop()}var l}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name.split("."),a=n[n.length-1],c=t.name.replace(".".concat(a),""),r="",e.prev=4,e.next=7,h(t,!1);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),Q.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(a,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(c)),e.abrupt("return");case 14:S({content:r,fileName:c,fileType:a,size:t.size,fileSize:ne()(t.size)}).then((function(e){console.log(e),Q.b.success("".concat(t.name,"  \u4e0a\u4f20\u6210\u529f"))}));case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("section",{className:"page-upload"},l.a.createElement("section",{className:"upload-line"},l.a.createElement(W.a,{beforeUpload:function(n){var a=n.name.split("."),c=a[a.length-1],r=n.name.replace(".".concat(c),"");return _.includes(c)?(console.log("\u5f53\u524d\u662f\u97f3\u9891\u6587\u4ef6\u5904\u7406",r,c),e(n),!1):ee.includes(c)?(console.log("\u5f53\u524d\u662f\u6b4c\u8bcd\u6587\u4ef6\u5904\u7406",r,c),t(n),!1):(Q.b.warning("\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5904\u7406".concat(c,"\u8fd9\u79cd\u7c7b\u578b\u6587\u4ef6\uff0c").concat(r)),!1)},showUploadList:!1,accept:function(){var e=_.concat(ee);return(e=e.map((function(e){return e=".".concat(e)}))).join(",")}(),multiple:!0},l.a.createElement(X.a,{icon:l.a.createElement(Y.a,null)},"\u70b9\u51fb\u4e0a\u4f20\u672c\u5730\u6b4c\u66f2\u6216\u8005\u6b4c\u8bcd")),l.a.createElement("p",{className:"tips"},l.a.createElement("span",null,"\u652f\u6301\u6b4c\u66f2\u683c\u5f0f ",_.join("\uff0c")),l.a.createElement("span",null,"\u652f\u6301\u6b4c\u8bcd\u683c\u5f0f ",ee.join("\uff0c")))))},ce=n(401),re=n(399),ie=function(){var e=Object(s.useState)([]),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),r=Object(g.a)(c,2),i=r[0],u=r[1],o=Object(s.useCallback)(Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get lrc List"),u(!0),e.next=4,D();case 4:t=e.sent,a(t),u(!1);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(s.useEffect)((function(){o()}),[o]),l.a.createElement("section",{className:"lrc-list"},l.a.createElement(re.a,{dataSource:n,columns:[{title:"\u6b4c\u8bcd\u540d",dataIndex:"fileName",key:"fileName"},{title:"\u5927\u5c0f",dataIndex:"fileSize",key:"fileSize",sorter:function(e,t){return e.size-t.size}}],pagination:!1,rowKey:"fileName",loading:i}))},se=n(403),le=n(405),ue=n(406),oe=(n(385),Object(A.a)((function(){var e=V.musicData,t=[{title:"\u6b4c\u66f2",dataIndex:"name",key:"name",render:function(t,n){return l.a.createElement("p",{className:"list-play"},(null===e||void 0===e?void 0:e.id)===n.id&&e.playing?l.a.createElement("span",null,l.a.createElement(le.a,{className:"icon",onClick:function(){return y()}})):l.a.createElement("span",null,l.a.createElement(ue.a,{className:"icon",onClick:function(){return p(n)}})),l.a.createElement("span",null,t))}},{title:"\u6b4c\u624b",dataIndex:"artist",key:"artist"},{title:"\u4e13\u8f91",dataIndex:"album",key:"album"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",render:function(e){return E(e)||"\u672a\u77e5"},sorter:function(e,t){return Number(e.duration)-Number(t.duration)}},{title:"\u683c\u5f0f",dataIndex:"codec",key:"codec",render:function(e,t){return e||t.fileType}},{title:"\u5927\u5c0f",dataIndex:"fileSize",key:"fileSize",sorter:function(e,t){return Number(e.size)-Number(t.size)}},{title:"\u5173\u8054\u6b4c\u8bcd\u540d",dataIndex:"lrcKey",key:"lrcKey",render:function(e,t){return e||l.a.createElement(se.b,{size:"middle"},l.a.createElement("span",{className:"action"},"\u5173\u8054\u6b4c\u8bcd"))}}],n=Object(s.useState)([]),a=Object(g.a)(n,2),c=a[0],r=a[1],i=Object(s.useState)(!1),u=Object(g.a)(i,2),o=u[0],m=u[1],f=Object(s.useCallback)(Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get music List"),m(!0),e.next=4,M();case 4:t=e.sent,r(t),m(!1);case 7:case"end":return e.stop()}}),e)}))),[]),p=function(t){var n;t.id!==e.id?(null===(n=V.musicPlayer)||void 0===n||n.stop(),setTimeout((function(){V.updatedMusicData({id:t.id})}),100)):V.musicPlayer&&V.musicPlayer.play()},y=function(){var e;null===(e=V.musicPlayer)||void 0===e||e.pause()};return Object(s.useEffect)((function(){console.log("music-get-list"),f()}),[f]),l.a.createElement("section",{className:"lrc-list"},l.a.createElement(re.a,{dataSource:c,columns:t,pagination:!1,rowKey:"fileName",loading:o}))}))),me=ce.a.TabPane,fe=function(){var e=Object(f.f)(),t=new URLSearchParams(Object(f.g)().search),n=Object(f.g)(),a=Object(s.useState)(""),c=Object(g.a)(a,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){if(t){var e=t.get("type")||"";["music","lrc"].includes(e)?i(e):i("music")}}),[t]),l.a.createElement("section",{className:"page-local"},l.a.createElement("section",{className:"local-upload"},l.a.createElement(ae,null),l.a.createElement("section",null,l.a.createElement(X.a,{onClick:function(){new Promise(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return a=e.sent,e.next=6,D();case 6:return c=e.sent,a=a.map((function(e){return c.forEach((function(t){t.fileName.includes(e.name)&&(e.lrcKey=t.fileName)})),e})),e.next=10,T.a.setItem("music-list",a);case 10:t("success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),n(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}())}},"\u81ea\u52a8\u5173\u8054\u6b4c\u8bcd"),l.a.createElement("p",{className:"tips"},"\u5173\u8054\u89c4\u5219: \u5f53\u524d\u6b4c\u66f2\u6ca1\u6709\u6b4c\u8bcd\uff0c\u540c\u65f6\u53ef\u4ee5\u627e\u5230\u6b4c\u8bcd\u540d\uff0c\u5305\u542b\u5b8c\u6574\u6b4c\u66f2\u540d"))),l.a.createElement("section",{className:"local-content"},l.a.createElement(ce.a,{activeKey:r,onChange:function(t){e.push("".concat(n.pathname,"?type=").concat(t))}},l.a.createElement(me,{tab:"\u97f3\u4e50\u5217\u8868",key:"music"},l.a.createElement(oe,null)),l.a.createElement(me,{tab:"\u6b4c\u8bcd\u5217\u8868",key:"lrc"},l.a.createElement(ie,null)))))},pe=function(){return l.a.createElement("p",null,"Love")},de=(n(389),function(){return l.a.createElement("section",{className:"page-home"},l.a.createElement("section",{className:"wrapper-box"},l.a.createElement("section",{className:"nav"},l.a.createElement("p",{className:"nav-item"},l.a.createElement(m.b,{to:"/",exact:!0},"\u63a8\u8350")),l.a.createElement("p",{className:"nav-item"},l.a.createElement(m.b,{to:"/local"},"\u672c\u5730\u97f3\u4e50"))),l.a.createElement("section",{className:"music-box"},l.a.createElement(f.c,null,l.a.createElement(f.a,{path:"/local",exact:!0},l.a.createElement(fe,null)),l.a.createElement(f.a,{path:"/",exact:!0},l.a.createElement(pe,null))))),l.a.createElement($,null))});n(390);var be=function(){return l.a.createElement("section",{className:"hzfe-music"},l.a.createElement(m.a,null,l.a.createElement(f.c,null,l.a.createElement(f.a,{path:"/",exact:!0},l.a.createElement(de,null)),l.a.createElement(f.a,{path:"*",exact:!0},l.a.createElement(de,null)))))},ge=(n(391),n(28)),ye=n(204),he=n.n(ye);T.a.config({name:"HZFE-MUSIC"}),o.a.render(l.a.createElement(ge.a,{locale:he.a},l.a.createElement(be,null)),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.dc410ec5.chunk.js.map